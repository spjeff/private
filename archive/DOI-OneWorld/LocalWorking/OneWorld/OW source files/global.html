<!DOCTYPE html>
<html>
<head>
    <base target="_top">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <title>OneWorld-Minerals</title>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

  <!-- Optional theme -->

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>
   
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-sanitize.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/ng-csv/0.3.6/ng-csv.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="//unpkg.com/xlsx/dist/shim.min.js"></script>
<script type="text/javascript" src="//unpkg.com/xlsx/dist/xlsx.full.min.js"></script>

<script type="text/javascript" src="//unpkg.com/blob.js@1.0.1/Blob.js"></script>
<script type="text/javascript" src="//unpkg.com/file-saver@1.3.3/FileSaver.js"></script>
  <meta charset="UTF-8">
  <meta name="layout" content="main"/>
  <title>Classification Toolkit for Grails</title>          

<style>
td {
    padding: 0px;
    margin: 0px;
    word-wrap:break-word
}
td.fixed {
   
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
tr:hover td{
    text-overflow: clip;
    white-space: normal;
}
table.fixed {
    table-layout: fixed;
}
@media (min-width: 768px) {
  .modal-xl {
    width: 90%;
   max-width:1200px;
  }
}

.px-5 {
  padding-left: ($spacer * 3) !important;
  padding-right: ($spacer * 3) !important;
}  


<!--BUTTON LIBRARY-->
test{}
.btn-blue {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #5ABAED;
  *background-color: #5ABAED;
  background-image: -moz-linear-gradient(top, #5ABAED, #5ABAED);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#5ABAED), to(#5ABAED));
  background-image: -webkit-linear-gradient(top, #5ABAED, #5ABAED);
  background-image: -o-linear-gradient(top, #5ABAED, #5ABAED);
  background-image: linear-gradient(to bottom, #5ABAED, #5ABAED);
  background-repeat: repeat-x;
  border-color: #5ABAED;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#5ABAED', endColorstr='#5ABAED', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-blue:hover,
.btn-blue:focus,
.btn-blue:active,
.btn-blue.active,
.btn-blue.disabled,
.btn-blue[disabled] {
  color: #FFFFFF;
  background-color: #5ABAED;
  *background-color: #003bb3;
}

.btn-orange {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #FF8400;
  *background-color: #FF8400;
  background-image: -moz-linear-gradient(top, #FF8400, #FF8400);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#FF8400), to(#FF8400));
  background-image: -webkit-linear-gradient(top, #FF8400, #FF8400);
  background-image: -o-linear-gradient(top, #FF8400, #FF8400);
  background-image: linear-gradient(to bottom, #FF8400, #FF8400);
  background-repeat: repeat-x;
  border-color: #FF8400;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FF8400', endColorstr='#FF8400', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-orange:hover,
.btn-orange:focus,
.btn-orange:active,
.btn-orange.active,
.btn-orange.disabled,
.btn-orange[disabled] {
  color: #FFFFFF;
  background-color: #FF8400;
  *background-color: #003bb3;
}

.btn-green {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #4BCC37;
  *background-color: #4BCC37;
  background-image: -moz-linear-gradient(top, #4BCC37, #4BCC37);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#4BCC37), to(#4BCC37));
  background-image: -webkit-linear-gradient(top, #4BCC37, #4BCC37);
  background-image: -o-linear-gradient(top, #4BCC37, #4BCC37);
  background-image: linear-gradient(to bottom, #4BCC37, #4BCC37);
  background-repeat: repeat-x;
  border-color: #4BCC37;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#4BCC37', endColorstr='#4BCC37', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-green:hover,
.btn-green:focus,
.btn-green:active,
.btn-green.active,
.btn-green.disabled,
.btn-green[disabled] {
  color: #FFFFFF;
  background-color: #4BCC37;
  *background-color: #003bb3;
}

.btn-gray {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #7A7878;
  *background-color: #7A7878;
  background-image: -moz-linear-gradient(top, #616161, #7A7878);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#616161), to(#7A7878));
  background-image: -webkit-linear-gradient(top, #616161, #7A7878);
  background-image: -o-linear-gradient(top, #616161, #7A7878);
  background-image: linear-gradient(to bottom, #616161, #7A7878);
  background-repeat: repeat-x;
  border-color: #7A7878;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#616161', endColorstr='#7A7878', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-gray:hover,
.btn-gray:focus,
.btn-gray:active,
.btn-gray.active,
.btn-gray.disabled,
.btn-gray[disabled] {
  color: #FFFFFF;
  background-color: #7A7878;
  *background-color: #003bb3;
}

.btn-rlegend {
  color: #000000;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #F5C6CB;
  *background-color: #F5C6CB;
  background-image: -moz-linear-gradient(top, #F5C6CB, #F5C6CB);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#F5C6CB), to(#F5C6CB));
  background-image: -webkit-linear-gradient(top, #F5C6CB, #F5C6CB);
  background-image: -o-linear-gradient(top, #F5C6CB, #F5C6CB);
  background-image: linear-gradient(to bottom, #F5C6CB, #F5C6CB);
  background-repeat: repeat-x;
  border-color: #F5C6CB;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#F5C6CB', endColorstr='#F5C6CB', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-rlegend:hover,
.btn-rlegend:focus,
.btn-rlegend:active,
.btn-rlegend.active,
.btn-rlegend.disabled,
.btn-rlegend[disabled] {
  color: #000000;
  background-color: #F5C6CB;
  *background-color: #003bb3;
}

.btn-glegend {
  color: #000000;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #C3E6CB;
  *background-color: #C3E6CB;
  background-image: -moz-linear-gradient(top, #C3E6CB, #C3E6CB);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#C3E6CB), to(#C3E6CB));
  background-image: -webkit-linear-gradient(top, #C3E6CB, #C3E6CB);
  background-image: -o-linear-gradient(top, #C3E6CB, #C3E6CB);
  background-image: linear-gradient(to bottom, #C3E6CB, #C3E6CB);
  background-repeat: repeat-x;
  border-color: #C3E6CB;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#C3E6CB', endColorstr='#C3E6CB', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-glegend:hover,
.btn-glegend:focus,
.btn-glegend:active,
.btn-glegend.active,
.btn-glegend.disabled,
.btn-glegend[disabled] {
  color: #000000;
  background-color: #C3E6CB;
  *background-color: #003bb3;
}

.btn-ylegend {
  color: #000000;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #FFEEBA;
  *background-color: #FFEEBA;
  background-image: -moz-linear-gradient(top, #FFEEBA, #FFEEBA);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#FFEEBA), to(#FFEEBA));
  background-image: -webkit-linear-gradient(top, #FFEEBA, #FFEEBA);
  background-image: -o-linear-gradient(top, #FFEEBA, #FFEEBA);
  background-image: linear-gradient(to bottom, #FFEEBA, #FFEEBA);
  background-repeat: repeat-x;
  border-color: #FFEEBA;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFEEBA', endColorstr='#FFEEBA', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-ylegend:hover,
.btn-ylegend:focus,
.btn-ylegend:active,
.btn-ylegend.active,
.btn-ylegend.disabled,
.btn-ylegend[disabled] {
  color: #000000;
  background-color: #FFEEBA;
  *background-color: #003bb3;
}

.btn-blegend {
  color: #000000;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #BEE5EB;
  *background-color: #BEE5EB;
  background-image: -moz-linear-gradient(top, #BEE5EB, #BEE5EB);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#BEE5EB), to(#BEE5EB));
  background-image: -webkit-linear-gradient(top, #BEE5EB, #BEE5EB);
  background-image: -o-linear-gradient(top, #BEE5EB, #BEE5EB);
  background-image: linear-gradient(to bottom, #BEE5EB, #BEE5EB);
  background-repeat: repeat-x;
  border-color: #BEE5EB;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#BEE5EB', endColorstr='#BEE5EB', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-blegend:hover,
.btn-blegend:focus,
.btn-blegend:active,
.btn-blegend.active,
.btn-blegend.disabled,
.btn-blegend[disabled] {
  color: #000000;
  background-color: #BEE5EB;
  *background-color: #003bb3;
}
.btn-red {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #BD1B2E;
  *background-color: #BD1B2E;
  background-image: -moz-linear-gradient(top, #BD1B2E, #BD1B2E);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#BD1B2E), to(#BD1B2E));
  background-image: -webkit-linear-gradient(top, #BD1B2E, #BD1B2E);
  background-image: -o-linear-gradient(top, #BD1B2E, #BD1B2E);
  background-image: linear-gradient(to bottom, #BD1B2E, #BD1B2E);
  background-repeat: repeat-x;
  border-color: #BD1B2E;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#BD1B2E', endColorstr='#BD1B2E', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-red:hover,
.btn-red:focus,
.btn-red:active,
.btn-red.active,
.btn-red.disabled,
.btn-red[disabled] {
  color: #FFFFFF;
  background-color: #BD1B2E;
  *background-color: #003bb3;
}

.btn-dblue {
  color: #FFFFFF;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
  background-color: #0C83C4;
  *background-color: #0C83C4;
  background-image: -moz-linear-gradient(top, #0C83C4, #0C83C4);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0C83C4), to(#0C83C4));
  background-image: -webkit-linear-gradient(top, #0C83C4, #0C83C4);
  background-image: -o-linear-gradient(top, #0C83C4, #0C83C4);
  background-image: linear-gradient(to bottom, #0C83C4, #0C83C4);
  background-repeat: repeat-x;
  border-color: #0C83C4;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0C83C4', endColorstr='#0C83C4', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
}
.btn-dblue:hover,
.btn-dblue:focus,
.btn-dblue:active,
.btn-dblue.active,
.btn-dblue.disabled,
.btn-dblue[disabled] {
  color: #FFFFFF;
  background-color: #0C83C4;
  *background-color: #003bb3;
}
<!--END BUTTON LIBRARY-->
test2{}
.accordion {
    background-color: #e8e8e8;
    color: #444;
    cursor: pointer;
    padding: 10px;
    width: 100%;
    text-align: left;
    border: #444;
    outline: #444;
    transition: 0.4s;
}

/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
.active, .accordion:hover {
    background-color: #ccc;
}

/* Style the accordion panel. Note: hidden by default */
.panel {
    padding: 0 10px;
    background-color: white;
    display: none;
    overflow: hidden;
}

.accordion:after {
    content: '\02795'; /* Unicode character for "plus" sign (+) */
    font-size: 13px;
    color: #777;
    float: right;
    margin-left: 5px;
}

.active:after {
    content: "\2796"; /* Unicode character for "minus" sign (-) */
}

.scrollable-menu {
    height: auto;
    max-height: 200px;
    overflow-x: hidden;
}
textarea {
  width: 100%
}

input[type=text] { width: 95%; box-sizing: border-box; height: 25px; }
input[type=text_2] { width: 80%; box-sizing: border-box; height: 25px; }


</style>
</head>
<body > 

<!--SAMPLE MODAL -->
  <div ng-app='mainapp' ng-controller='firstcontroll'ng-cloak>
    <div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-labelledby="formModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">THIS IS A HEADER
                </div>
                <div class="modal-body "> THIS IS A BODY
          </div></div></div></div>
 <!--Version MODAL -->
  <div ng-app='mainapp' ng-controller='firstcontroll'ng-cloak>
    <div class="modal fade" id="versionModal" tabindex="-1" role="dialog" aria-labelledby="formModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">Welcome to a new Version of OneWorld. 
                </div>
                <div class="modal-body "> Note that now when you click 'update' after editing data it automattically saves! 
                Hope this saves you some time!
                Other stability and bugfixes have been added to help make generating tables even easier!
                Additionally, some behind-the scenes changes have been made so let us know if you have any issues, especcially if they are new!
          </div></div></div></div>          
<!--SUBMIT RECONCILE PROMPT -->
    <div class="modal fade" id="reconcileModal" tabindex="-1" role="dialog" aria-labelledby="reconcileModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Submit for Reconcile</b></font></div>
                <div class="modal-body "><p></p>Are you sure you would like to submit this data for reconcile? <font color="#0A72F7" face="SnowCap BT"><b><br><br>Once you  hit submit, it may take a minute to get a confirmation prompt. Please do not exit, refresh, or leave the page until your submission is confirmed. Larger tables may take longer. </b></font><br><p></p>Once submitted, no further changes may be made to the data for the remainder of the MYB cycle. Each specialist has 7 days to respond to any reconcile reqeusts.<p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button id="submit" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="submitDataFinal()">Submit </button>
           </div></div></div></div></div>

<!--SUBMIT RECONCILE FINAL PROMPT -->
    <div class="modal fade" id="reconcilefinalModal" tabindex="-1" role="dialog" aria-labelledby="reconcilefinalModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Submitted</b></font></div>
                <div class="modal-body "><p></p>Awesome! Your data has been submitted for reconcile.<p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>

<!--SUBMIT RECONCILE FAIL PROMPT -->
    <div class="modal fade" id="reconcilefaillModal" tabindex="-1" role="dialog" aria-labelledby="reconcilefaillModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Sorry, I Can't Do That Hal...</b></font></div>
                <div class="modal-body "><p></p>The reconcile has encountered an issue. It's possile the System has become sentient and merged with SkyNet. Please contact the System Administrators immediately at NMICSystems@usgs.gov.<p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>

<!--SAVE PROMPT -->
    <div class="modal fade" id="saveModal" tabindex="-1" role="dialog" aria-labelledby="saveModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Save Draft</b></font></div>
                <div class="modal-body "><p></p>Are you sure you would like to save your draft data? <b>Really?</b><p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button id="save" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="submitData()">Save</button>
           </div></div></div></div></div>
           
<!--SAVE FINAL PROMPT -->
    <div class="modal fade" id="savefinalModal" tabindex="-1" role="dialog" aria-labelledby="savefinalModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Draft Saved</b></font></div>
                <div class="modal-body "><p></p>We don't take your hard work for granite! Your data has been saved.<p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>

<!--LOAD PROMPT -->
    <div class="modal fade" id="loadModal" tabindex="-1" role="dialog" aria-labelledby="loadModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Loading Table</b></font></div>
                <div class="modal-body "><p></p>Your table is now loading. It may take a few seconds, especially for bigger tables.<p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>
           
<!--EXPORT PROMPT -->
    <div class="modal fade" id="exportModal" tabindex="-1" role="dialog" aria-labelledby="exportModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Exporting Table</b></font></div>
                <div class="modal-body "><p></p>Your table is now downloading as an Excel table. Instructions and macros to fully format the table are available in the OneWorld-help folder in the ERS's Resource Center.<br><br><b>Per management, specialists may not export and submit their own tables.</b> This process is managed by the OneWorld Team. You will receive a notification when your table is available via email. All tables will be saved to the OneWorld folder on the W: Drive. The export feature is available for informational purposes only.<p></p>                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>

<!--START VALIDATION PROMPT -->
    <div class="modal fade" id="validationModal" tabindex="-1" role="dialog" aria-labelledby="validationModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="4"><b>Danger! Danger Will Robinson!</b></font></div>
                <div class="modal-body "><p></p> I like what you've done so far, but there was an issue with one or more data entries that prevents this table from being submitted. Please correct the following issues:<br><br><p></p>
                <li ng-repeat="error in result track by $index">{{error}}<br></li><p></p>
                <div class="modal-footer">
                    <p><button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
           </div></div></div></div></div>

<!--ALERT MODAL -->
  <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">{{alert}}
                </div>
                <div class="modal-body ">{{message}}
                </div></div></div></div>
 <!--SERIES REQUEST MODAL -->
<div class="modal fade" id="datarevisionModal" tabindex="-1" role="dialog">
      <div class="modal-xl modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">  
                 <font size= "5" color="#0741B1"><b>Series Request Form</b></font>
                 <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>

          <div class="modal-body " align="left">
                          <font size="4" color="#0A72F7" face="SnowCap BT"><b>1. Production Information&ensp;</b></font><table class= "table table-sm table-bordered table-striped fixed"><font size = "1"><i>(All fields must be filled out for Production Information)</i></font>  
                          <col width="8%"><col width="14%">  <col width="8%"><col width="24%">  <col width="8%"><col width="14%">  <col width="10%"><col width="14%">                            
                            <tbody><tr>
                                <td class="fixed"><font size="2"><b>Request:</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.request" ng-init="drr.request='Add'"ng-options="x for x in ['Add','Remove','Modify']" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>
                                <td class="fixed"><font size="2"><b>Commodity:</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.commodity" ng-init="drr.commodity='Alumina'"ng-options="x for x in commodities" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                             
                                <td class="fixed"><font size="2"><b>Type:</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.type" ng-init="drr.type='Mine'"ng-options="x for x in ['Compounds','Intermediate','Mine','Production','Products','Refinery','Smelter']" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                            
                                <td class="fixed"><font size="2"><b>Measure:</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.measure" ng-init="drr.measure='Gross weight'"ng-options="x for x in ['Gross weight','Elemental content','Oxide content']" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                                         
              </tr><tr style="height=40px">
                                <td class="fixed"><font size="2"><b>Unit:&ensp;</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.unit" ng-init="drr.unit='Metric tons'"ng-options="x for x in ['42-gallon barrels','Carats','Cubic meters','Kilograms','Metric tons']" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                                  
                                <td class="fixed"><font size="2"><b>Country:&ensp;</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.country" ng-init="drr.country='Afghanistan'"ng-options="x for x in countries" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                            
                                <td class="fixed"><font size="2"><b>Phase:&ensp;</b></font></td>
                                <td class="fixed"><font size="2"><div><select id='filter1' name=filter1   ng-model="drr.phase" ng-init="drr.phase='Metric tons'"ng-options="x for x in ['Primary','Secondary','Primary and Secondary','Undifferentiated','Not applicable']" 
                                          onkeydown = "if (event.keyCode == 13) document.getElementById('initButton').click()"    ></select> </div></font></td>                                 
                                <td class="fixed"><font size="2"><b>Form:</b></font></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v1" ng-model= "drr.form"></font></td>                            
                           
                             </tr></tbody></table>


                  
           <hr><font size="4" color="#0A72F7" face="SnowCap BT"><b>2. Data Entry&ensp;</b></font><font size = "1"><i>(ADD: Must fill out all years. Use NA if that data is unknown. MODIFY: Enter only the data that needs to change.)</i></font>               
                          <table class= "table table-sm table-striped table-bordered fixed" ng-hide="drr.request=='Remove'"> 
                           <col width="25%"><col width="25%"><col width="25%"><col width="25%">      
                            <tbody><thead align="center"><tr>                                               
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2011</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2012</b></font></th>                                
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2013</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2014</b></font></th>                                
                           </tr></thead><tr>
                  <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2011.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2011)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2011" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>                            
                                <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2012.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2012)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2012" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>              
                  <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2013.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2013)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2013" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>                            
                                <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2014.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2014)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2014" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>              
                           </tr><tr>                           
                  <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2011"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2012"></textarea></font></td>
                                <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2013"></textarea></font></td>
                                <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2014"></textarea></font></td>
                           </tr><thead align="center"><tr>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2015</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2016</b></font></th>                                
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2017</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>2018</b></font></th>                                
                           </tr></thead><tr>
                  <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2015.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2015)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2015" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>                            
                                <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2016.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2016)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2016" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>              
                  <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2017.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2017)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2017" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>                            
                                <td class="fixed"><font size="2"><input type="text_2" name="v1" placeholder="Enter new data here" ng-model= "drr.D_2018.str" onkeydown="return (event.keyCode!=188);" ng-change='badchar_remove_obj(drr.D_2018)'></font><span style="float: right;"><label><input type="checkbox" ng-model="drr.E_2018" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>                             </tr><tr>
                           </tr><tr>                                                         
                  <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2015"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2016"></textarea></font></td>
                                <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2017"></textarea></font></td>
                                <td class="fixed"><font size="2"><textarea name="v1" rows="2" placeholder="New data require a remark" ng-model= "drr.S_2018"></textarea></font></td>
                           </tr></tbody></table>
           <hr><font size="4" color="#0A72F7" face="SnowCap BT"><b>3. Explanation&ensp;</b></font>           
             <textarea name="notes" rows="3" placeholder="Please add any additional information needed for this request." ng-model= "drr.notes"></textarea>
                <div class="modal-footer">
                      <td class="fixed"><font size="1" color="red"><i>Complete all fields to submit</i></font></td><button id="submit" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="submit_drr()" align="right"ng-disabled = "drr.request!='Remove'&&(!drr.D_2011.str||!drr.D_2012.str||!drr.D_2013.str||!drr.D_2014.str||!drr.D_2015.str||!drr.D_2016.str||!drr.D_2017.str||!drr.D_2018.str||!drr.S_2011||!drr.S_2012||!drr.S_2013||!drr.S_2014||!drr.S_2015||!drr.S_2016||!drr.S_2017||!drr.S_2018)">Submit</button></div>
                       </div></div></div></div>
               
<!--PRODINFO MODAL -->
  <div class="modal fade" id="prodinfoModal" tabindex="+1" role="dialog" aria-labelledby="prodinfoModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="5"><b>Data Entry Help</b></font><br>
                </div>
                <div class="modal-body "><font size="4" color="#0A72F7" face="SnowCap BT"><b>Production Information</b></font><br><font size=2>The information contained here helps you to understand the commodity you are reporting data for. These terms were assigned and reviewed during the 2016 OneWorld Reconciliation Project. While the volume-specific description can be changed, all other entries are coded to properly display on the tables they need to. To change any of the other production information qualifiers, please contact the System Adminstrator and NMICSystems@usgs.gov or compelte a Data Revision Request using the button on the main page.</font>
                <br><br><font size="4" color="#0A72F7" face="SnowCap BT"><b>Data Entry</b></font><br><font size=2>The Data Entry modal shows you 3 types of data. First, the reconciled data shows what you and the other specalist most recently agreed to. The other volume's draft entries show what the specialist currently has saved, but hasn't been agreed upon. Be careful when considering this data, it may be outdated or mistyped. Always check. The draft entries for your volume should be editable. If anything in your draft area is modified, including the 'e', the data, or the remark, at least the data entry and remark entry must have something in it. Otherwise, it won't let you submit the table. This is to ensure that no changes are made without an explanation. TO update a source, please copy and paste the reconciled dat apoint into the data cell, which will prevent it from being reconciled but update the source.</font>
                <br><br><font size="4" color="#0A72F7" face="SnowCap BT"><b>Footnotes</b></font><br><font size=2>Footnotes are unique to your table. They only appear on the table they are assigned to, so a footnote on a minerals table won't show up on a global table. Footnotes should be checked to make sure they contain information pertinent to the years shown (i.e. not referencing 2011 in a 2017 table). Footnotes listed in the data entry modal (the one you're working on) should not contain standard footnotes such as estimated, revised, less than half a unit, withheld, not applicable, or preliminary. Estimated footnotes are controlled by the checkbox next to each data point and will show up when applicable with reconciled data or the other volume's data. Revised footnotes and less than half a unit footnotes are generated when compared against the prior year's table and won't show up in the interface for the 2017 cycle. Preliminary and XX (Not applicable) need to be applied after the table has been generated. Withheld and NA (Not available) should be entered in as data points.</font>
                </div></div></div></div>
                
<!--ADDITION MODAL -->
  <div class="modal fade" id="additionModal" tabindex="-1" role="dialog" aria-labelledby="additionModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size=5><b>New Data</b></font>
                </div>
                <div class="modal-body "><font size=2>
               <font color="red" size="4"> This feature under Final Testing, in the meantime, please submit any data revisions <a href="https://goo.gl/forms/OFU1D4k80x6mYLoH2" target="blank">using this form.</a> </font><br><br></font>
                
               
</div></div></div></div>
                
<!--ADMIN PROMPT -->
    <div class="modal fade" id="adminmModal" tabindex="-1" role="dialog" aria-labelledby="adminmModalLabel">
      <div class="modal-xl modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="5"><b>Mineral Commodities Section</b></font><br>
                <font size=1><i>(Updated every time the page is refreshed.)</i></font></div>
                <div class="modal-body ">

<div class="container-fluid">
<div class="row no-gutters">
<div class="col-9  ">

                <font size="4" color="#0A72F7" face="SnowCap BT"><b>Table Status</b></font>
                <table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto; height:400px;">
        <col width="17%"><col width="10%"><col width="10%"><col width="9%"><col width="9%"><col width="9%"><col width="9%"><col width="9%">
                      <thead><tr>
          
                            <th class="text-left fixed"><font size=2>Commodity</font></th>
                            <th class="text-left fixed"><font size=2>Specialist</font></th>
                            <th class="text-center fixed"><font size=2>Due</font></th>
                            <th class="text-center fixed"><font size=2>Submitted</font></th>
                            <th class="text-center fixed"><font size=2>Reconciled</font></th>
                            <th class="text-center fixed"><font size=2>Generated</font></th>  </tr></thead>
                
          <tbody> 
            <tr ng-repeat="row in admin.admin1_list">
                            <td class='text-left fixed' ng-class='{"table-danger":((row.rec_due<today)&&(row.rec_submit==="")&&(row.rec_table==="")),"table-warning":((row.rec_submit!=="")&&(row.rec_table==="")),"table-success":(row.rec_table!=="")}'><font size=2>{{row.commodity}}</font></td>
                            <td class='text-left text-capitalize fixed'><font size=2>{{row.specialist_name}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_due|date:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_submit|stringToDate:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_stage1|stringToDate:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_table|stringToDate:'MMM dd'}}</font></td> </tr></table></div>
                            
 <div class="col-3">
            
<br>
<table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto;">
<thead><tr><th colspan="2"><font size="4" color="#0A72F7" face="SnowCap BT"><b>Table Summary</b></font></th></tr></thead>
<tbody>
<col width="85%"><col width="15%">
<tr><td><font size=2><b>Not Started</b></font></td><td class="text-center fixed table-info"><font size="2">{{admin.num_ready}}</font></td></tr>
<tr><td><font size=2><b>Late</b></font></td><td class="text-center fixed table-danger"><font size="2">{{admin.num_late}}</font></td></tr>
<tr><td><font size=2><b>Complete</b></font></td><td class="text-center fixed table-success"><font size="2">{{admin.num_done}}</font></td></tr>
<tr><td><font size=2><b>In Progress:</b></font></td><td class="text-center fixed table-warning"><font size="2">{{admin.num_prog}}</font></td></tr>
<tr ng-repeat="row in admin.mprogress_list">
<td colspan="2"><font size="2">&emsp;-{{row}}</font></td></tr>
</tbody></table>
            
<table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto; height:400px;">
<thead><tr><th colspan="2"><font size="4" color="#0A72F7" face="SnowCap BT"><b>Outstanding Reconcile</b></font></th></tr></thead>
            
            <tbody>
                     <col width="90%"><col width="10%">
                     <tr><th class='text-left fixed'><font size=2>Requests</font>&emsp;<font size=1><i>From V3</i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.mineral1_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.commodity}}</font><font size=1>&nbsp;({{row.country}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr>
                     <tr><th class='text-left fixed'><font size=2>Disagreements</font>&emsp;<font size=1><i>From V1</i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.mineral2_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.commodity}}</font><font size=1>&nbsp;({{row.country}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr>
                     <tr><th class='text-left fixed'><font size=2>Supervisor</font>&emsp;<font size=1><i></i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.super_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.commodity}}</font><font size=1>&nbsp;({{row.country}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr></tbody></table></div></div></div>
                     
                     
                     
                     </div></div></div></div>
                     

<!--ADMIN-GLOBAL PROMPT -->
    <div class="modal fade" id="admingModal" tabindex="-1" role="dialog" aria-labelledby="admingModalLabel">
      <div class="modal-xl modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="5"><b>Global Minerals Analysis Section</b></font><br>
                <font size=1><i>(Updated every time the page is refreshed.)</i></font></div>
                <div class="modal-body ">

<div class="container-fluid">
<div class="row no-gutters">
<div class="col-9  ">

                <font size="4" color="#0A72F7" face="SnowCap BT"><b>Table Status</b></font>
                <table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto; height:400px;">
        <col width="17%"><col width="10%"><col width="10%"><col width="9%"><col width="9%"><col width="9%"><col width="9%"><col width="9%">
                      <thead><tr>
          
                            <th class="text-left fixed"><font size=2>Country</font></th>
                            <th class="text-left fixed"><font size=2>Specialist</font></th>
                            <th class="text-center fixed"><font size=2>Due</font></th>
                            <th class="text-center fixed"><font size=2>Submitted</font></th>
                            <th class="text-center fixed"><font size=2>Reconciled</font></th>
                            <th class="text-center fixed"><font size=2>Generated</font></th> </tr></thead>
                
          <tbody> 
            <tr ng-repeat="row in admin.admin3_list">
                            <td class='text-left fixed' ng-class='{"table-danger":((row.rec_due<today)&&(row.rec_submit==="")&&(row.rec_table==="")),"table-warning":((row.rec_submit!=="")&&(row.rec_table==="")),"table-success":(row.rec_table!=="")}'><font size=2>{{row.country}}</font></td>
                            <td class='text-left text-capitalize fixed'><font size=2>{{row.specialist_name}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_due|stringToDate:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_submit|stringToDate:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_stage1|stringToDate:'MMM dd'}}</font></td>
                            <td class='text-center fixed'><font size=2>{{row.rec_table|stringToDate:'MMM dd'}}</font></td> </tr></table></div>
                            
 <div class="col-3">
            
            <br>
                         <table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto;">
<thead><tr><th colspan="2"><font size="4" color="#0A72F7" face="SnowCap BT"><b>Table Summary</b></font></th></tr></thead>
<tbody>
<col width="85%"><col width="15%">
<tr><td><font size=2><b>Not Started</b></font></td><td class="text-center fixed table-info"><font size="2">{{admin.gnum_ready}}</font></td></tr>
<tr><td><font size=2><b>Late</b></font></td><td class="text-center fixed table-danger"><font size="2">{{admin.gnum_late}}</font></td></tr>
<tr><td><font size=2><b>Complete</b></font></td><td class="text-center fixed table-success"><font size="2">{{admin.gnum_done}}</font></td></tr>
<tr><td><font size=2><b>In Progress:</b></font></td><td class="text-center fixed table-warning"><font size="2">{{admin.gnum_prog}}</font></td></tr>
<tr ng-repeat="row in admin.gprogress_list">
<td colspan="2"><font size="2">&emsp;-{{row}}</font></td></tr>
</tbody></table>
            
<table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto; height:400px;">
<thead><tr><th colspan="2"><font size="4" color="#0A72F7" face="SnowCap BT"><b>Outstanding Reconcile</b></font></th></tr></thead>
            
            <tbody>
                     <col width="90%"><col width="10%">
                     <tr><th class='text-left fixed'><font size=2>Requests</font>&emsp;<font size=1><i>From V3</i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.global1_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.country}}</font><font size=1>&nbsp;({{row.commodity}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr>
                     <tr><th class='text-left fixed'><font size=2>Disagreements</font>&emsp;<font size=1><i>From V1</i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.global2_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.country}}</font><font size=1>&nbsp;({{row.commodity}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr>
                     <tr><th class='text-left fixed'><font size=2>Supervisor</font>&emsp;<font size=1><i></i></font></th><th class='text-center fixed'><font size=2>ðŸ•‘</font></th></tr>
                     <tr ng-repeat="row in admin.super_list">
                     <td class='text-left fixed'><font size=2>&emsp;-{{row.country}}</font><font size=1>&nbsp;({{row.commodity}})</font></td><td class='text-center fixed'>{{(((row.v1_expires-today)/(1000*60*60*24)))|number:0}}</td></tr></tbody></table></div></div></div>
                     
                     
                     
                     </div></div></div></div>
                              
                
<!--TROUBLESHOOTING MODAL -->
  <div class="modal fade" id="troubleshootingModal" tabindex="-1" role="dialog" aria-labelledby="troubleshootingModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size=5><b>Help and Troubleshooting</b></font>
                </div>
                <div class="modal-body ">
                
<button class="accordion">How do I get started?</button>
<div class="panel"><font size=2>
  <p>It's easy! To get started, just select your desired table from the drop-down menu and press the <button type="button" class="btn btn-blue btn-sm">Load</button> button. Each row contains your respective entries, which you can click ot open the data entry window.  <br>The first line of the data entry window is for production information, which includes all the important terminology for that entry. You can customize a description, add a footnote for that specific entry, or (for GMAS) suppress or change the unit multiplier.
  <p>The next line is for data entry. You will see the first 2 rows are for the data that has been reconciled by both specialists.The next 2 rows will have draft data, if there is any, from the entry's specialist. The last 2 rows are for you to enter your data. Please note, if you change a data point, even just marking it as an estimate, you need to retype or provide a source.
  <p> The last section are for year specific footnotes. Once you have made all the necessary changes, click the <button type="button" class="btn btn-primary btn-sm">Update</button> button at the bottom. If you do not click this, your data changes will be lost. The next two blocks are for the Volume 1 and Volume 3 draft data, or data that has been entered by a specialist but that hasn't been reconciled yet.
  <p>>Once you've changed all the data, you can either <button type="button" class="btn btn-blue btn-sm">Save</button> your table and come back later or submit it for <button type="button" class="btn btn-orange btn-sm">Reconcile</button>.</font></p>
</div>

<button class="accordion">What does each button do?</button><div class="panel"><table class="table table-sm table-bordered table-striped fixed" style="overflow-y: auto; height:400px;">
 <tbody><col width="15%"><col width="85%"><font size=2>
  <tr><td><button type="button" class="btn btn-blue btn-sm">&nbsp;&emsp;Load&emsp;&nbsp;</button></td><td><font size=2>Loads the data for the commodity or country selected in the drop down menu.</font></td></tr>
  <tr><td><button type="button" class="btn btn-blue btn-sm">&emsp;Export&emsp;</button></td><td><font size=2>Downloads a raw data version of the table. Do not use this to get your final table.</font></td></tr>
  <tr><td><button type="button" class="btn btn-orange btn-sm">&nbsp;&emsp;Save&emsp;&nbsp;</button></td><td><font size=2>Saves all draft data entered.</font></td></tr>
  <tr><td><button type="button" class="btn btn-orange btn-sm">&nbsp;&ensp;Submit&ensp;&nbsp;</button></td><td><font size=2>Submits the table for reconcile. This will only work if all data has been filled out properly.</font></td></tr>
  <tr><td><button type="button" class="btn btn-green btn-sm">&nbsp;Reconcile&nbsp;</button></td><td><font size=2>This table will allow you to reconcile data if you are a specialist, supervisor, or if you need to reconcile a series request.</font></td></tr>
  <tr><td><button type="button" class="btn btn-red btn-sm">&nbsp;&nbsp;&emsp;Data&emsp;&nbsp;&nbsp;</button></td><td><font size=2>You can either view the OneWorld library, a resource of sources, or submit a Series Request Form.</font></td></tr>
  <tr><td><button type="button" class="btn btn-blue btn-sm">&ensp;Managers&ensp;</button></td><td><font size=2>A tool for everyone, but especially managers. Under the Metrics can view assignments, due dates, and completion metrics. Suppressions will show all data currently suppressed in the database (a GMAS option only). Expirations will show data that was submitted for reconcile but not responded to in time. The Series Request Archive shows a history of all requests and database modificaitons requested.</font></td></tr>
  <tr><td><button type="button" class="btn btn-gray btn-sm">&ensp;Resources&ensp;</button></td><td><font size=2>Stocked full of resources such as the Query pages, which allow you to view any table or entry for a given commoidty or country. The Table Layout options allows a specialist to modify their eneral table footnotes, title, table number and more. Help brings you this lovely feature. IDA is a button specifically used by the IDA group (don't touch it!).</font></td></tr>
</font></tbody></table></div>

<button class="accordion">What is the process for reconcile?</button>
<div class="panel"><font size=2>
  <ol type="1"><li>After submission, an email goes out notifying any specialists who need to reconcile your new data. Values that need reconciled are highlighted in yellow.</li>
  <li>Those specialists have 5 business days to respond. They can either agree with your data, in which case it becomes the new official number and it's done, or they can disagree.</li>
  <li>If they disagree, you will be notified via email and have the opportunity to either agree or disagree within 5 business days.</li>
  <li>If specialists can't reach agreement after one back-and-forth, it goes to the supervisors for final determination. An email will go out to both specialists, their supervisors, and chiefs.</li>
  <li>If any specialist fails to respond within the required time period, the last suggested value becomes the new reconciled data.</li>
  <li>After all reconcile for the table is complete, IDA will recieve an email and generate the final table. this process can take up to 5 business days. You will recieve an email once the table is done.</li>
  <li>Please review the table immediately and email NMICSystems@usgs.gov if you find any issues. Otherwise, you're done.</li>
  </ol></font></div>
  
<button class="accordion">Why can't I submit my table?</button>
<div class="panel">
  <p><br><font size=2>If you get an error when submitting a table, it should give you a pop up detailing what information you still need to enter. Most often the issue is that a draft value was entered, but not a source (or vice versa). The pop-up window will tell you exactly what country and year there is an issue with. Make sure both the quantity and source boxes are filled out and you are good to go!</font>
  </p></div>

<button class="accordion">How do I know everything worked?</button>
<div class="panel">
  <p><br><font size=2>Ahh...good question! If you load or save your table, you will get a pop-up prompt letting you know that it's all done and done right. If you submit your table, you will see a prompt letting you know it went through and you will receive an email. If you submit your reconcile data, you will also receive a prompt, the page will reload, and the reconciled data will dissapear.</font></div>

<button class="accordion">How I do delete, add, or change a row?</button>
<div class="panel">
  <p><br><font size=2>To submit a series request, use the Data button and select Series Request Form.You don't need to submit a data revision form if:
  <ul><li>A series is already zero for the five year period. You can hide zeroed out data by clicked Resources > Table Layout >Zeroed Out (check the box).</li>
  <li>For Commodity Specialists: If a certain form shouldn't show up on your table (marketable, concentrates, etc.), contact us at NMICSystems@usgs.gov. That has to be coded into the database.</li>
  <li>For GMAS: If you only want to hide the row from your table, please use the Suppress button by clicking on the row.</li></ul>
  <ol type = "1"><li>Production Information: Fill in all entries. Indicate whether you want to add a series, remove a series, or modify a series after the table has already been submitted.</li>
  <li>Data Entry: If you are adidng a series, please fill in all data cells and source cells. If you don't have data, please enter NA and provide a source. To modify, only enter the data points and sources you want to modify.</li>
  <li>Explanation: Especially for deletions or modifications, please provide reasoning for supervisors and the other specialist to review</li>
  <li>Submit: Once submitted, the entry's other specialist, their supervisor, and your supervisor should all approve or disapprove within 10 days using the Reconcile > Series Request Review Feature. If disapproving, they should provide a response which will be emailed to everyone and that request is cancelled.</li></ol>
  </font></div>

<button class="accordion">What footnotes are going to show up automatically?</button>
<div class="panel">
  <p><br><font size=2>The System will automatically generate any estimated or revised footnotes based on your entries from last year. IDA will doubel check these and add in any less than half a unit footnotes as well.</font></div>
    
<button class="accordion">What if something isn't showing up?</button>
<div class="panel">
  <p><br><font size=2>Try pressing save, waiting a few seconds for the confirmation prompt, and then reload the page. If that doesn't work, contact us at NMICSystems@usgs.gov.
  </font></div>
<br><br>
<font size=2><i>If you have a a question you think should be added, let us know!</i>If you didn't find the answer you were looking for please email us at <a id="email121" href="#">NMICSystems@usgs.gov.</a><br><br></font>
</div></div></div></div>
                        
<!--DATA ENTRY MODAL -->            
<div class="modal fade" id="dataModal" tabindex="-1" role="dialog">
      <div class="modal-xl modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">  
                 <font size= "5"><b>{{row.commodity}}, {{row.country}}</b></font>

                 <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>
          <div class="modal-body " align="left">
                                     

                          <font size="4" color="#0A72F7" face="SnowCap BT"><b>1. Production Information&ensp; 
                          <a data-dismiss="modal" data-target="#prodinfoModal"  data-toggle="modal"><img src="https://i.lensdump.com/i/8alrOM.jpg" style="width:20px;height:20px;"></a></b></font>
                          <table class= "table table-sm table-bordered table-striped fixed">   
                          <col width="8%"><col width="10%">  <col width="8%"><col width="10%">  <col width="8%"><col width="10%">  <col width="10%"><col width="16%"><col width="10%"><col width="10%">                               
                            <tbody><tr>
                                <td class="fixed"><font size="2"><b>Type:</b></font></td>
                                <td class="fixed"><font size="2">{{row.type}}</font></td>                                
                                <td class="fixed"><font size="2"><b>Measure:</b></font></td>
                                <td class="fixed"><font size="2">{{row.measure_production}}</font></td>                                
                                <td class="fixed"><font size="2"><b>Form:</b></font></td>
                                <td class="fixed"><font size="2">{{row.form}}</font></td>                                
                                <td class="fixed"><font size="2"><b>V1 Description:</b></font></td>
                <td class="fixed"><font size="2">{{row.Commodity_Description}}</font></td>
                                <td class="fixed"><font size="2"><b>Unit Mulitplier:</b></font></td>
                                <td class="fixed"><font size="2"><select id="multiplier" name=multiplier ng-model="row.multiplier" ng-init=row.multiplier ng-options="x for x in ['','thousand','million']"></select></font></td>    
              </tr><tr style="height=40px">
                                <td class="fixed"><font size="2"><b>Phase:&ensp;</b></font></td>
                                <td class="fixed"><font size="2">{{row.phase}}</font></td>                                
                                <td class="fixed"><font size="2"><b>Unit:&ensp;</b></font></td>
                                <td class="fixed"><font size="2">{{row.unit}}</font></td>                                
                                <td class="fixed"><font size="2"><b>Subform:&ensp;</b></font></td>
                                <td class="fixed"><font size="2">{{row.subform}}</font></td>    
                                <td class="fixed"><font size="2"><b>V3 Description:</b></font></td>
                                <td class="fixed"><font size="2"><input type="text" name="f1" placeholder="This shows up on your table!" ng-model= "row.Country_Description"></font>
                                <td class="fixed"><font size="2"><b>Suppress:</b></font></td>
                                <td class="fixed"><font size="2"><select id="suppress" name=suppress ng-model="row.supress" ng-init=row.supress ng-options="x for x in ['Yes','No']" ></select></font></td>                              
                             </tr><tr>
                                <td class="fixed" colspan="1"><font size="2"><b>Footnote 1</b></font></td><td class="fixed" colspan="4"><font size="2"><textarea name="v3" rows="1" placeholder="No standard footnotes (i.e. e, r, etc.)" ng-model= "row.FOOTNOTE_VOLUME_3A"></textarea></font></td>
                                <td class="fixed" colspan="1"><font size="2"><b>Footnote 2</b></font></td><td class="fixed" colspan="4"><font size="2"><textarea name="v3" rows="1" placeholder="No standard footnotes (i.e. e, r, etc.)"ng-model= "row.FOOTNOTE_VOLUME_3B"></textarea></font></td>                               
              </tr></tbody></table>







                          <hr><font size="3" color="#0A72F7" face="SnowCap BT"><b>2. Data Entry</b></font>&emsp;<font size = "1" color="red"><i>All data must be entered in base units, not using multipliers. (i.e. metric tons, cubic meters, etc.)</i></font>               
                          <table class= "table table-sm table-bordered table-striped fixed"> 
                           <col width="10%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%">      
                            <tbody><tr>                          
                                <th class="fixed"></th>                          
                                <th class="text-center fixed" align="center"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-4}}</b></font></th>
                                <th class="text-center fixed" align="center"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-3}}</b></font></th>
                                <th class="text-center fixed" align="center"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-2}}</b></font></th>                                
                                <th class="text-center fixed" align="center"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-1}}</b></font></th>
                                <th class="text-center fixed" align="center"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-0}}</b></font></th>                                
                           </tr><tr>
                                <td class="fixed"><font size="2" color="#0741B1" face="SnowCap BT"><b>Reconciled</b></font></td>
                  <td class="fixed" align="center"><font size="2">{{row.year1_current_value|number|number_num:row.year1_current_value}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year1_current_e}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year2_current_value|number|number_num:row.year2_current_value}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year2_current_e}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year3_current_value|number|number_num:row.year3_current_value}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year3_current_e}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year4_current_value|number|number_num:row.year4_current_value}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year4_current_e}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year5_current_value|number|number_num:row.year5_current_value}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year5_current_e}}</font></b></sup></td>
                           </tr><tr>
                                <td class="fixed"><font size="2">Remarks</font></td>                                
                  <td class="fixed"><font size="2">{{row.year1_current_source}}</font></td>
                  <td class="fixed"><font size="2">{{row.year2_current_source}}</font></td>                                             
                  <td class="fixed"><font size="2">{{row.year3_current_source}}</font></td>             
                  <td class="fixed"><font size="2">{{row.year4_current_source}}</font></td>             
                  <td class="fixed"><font size="2">{{row.year5_current_source}}</font></td>
                           </tr><tr>
                                <td class="fixed"><font size="2" color="#0741B1" face="SnowCap BT"><b>Volume 1</b></font></td>
                  <td class="fixed" align="center"><font size="2">{{row.year1_v1_value_prelim|number|number_num:row.year1_v1_value_prelim}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year1_v1_e_prelim}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year2_v1_value_prelim|number|number_num:row.year2_v1_value_prelim}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year2_v1_e_prelim}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year3_v1_value_prelim|number|number_num:row.year3_v1_value_prelim}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year3_v1_e_prelim}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year4_v1_value_prelim|number|number_num:row.year4_v1_value_prelim}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year4_v1_e_prelim}}</font></b></sup></td>
                  <td class="fixed" align="center"><font size="2">{{row.year5_v1_value_prelim|number|number_num:row.year5_v1_value_prelim}}</font><sup><b><font size="3" color="#0A72F7" face="SnowCap BT">{{row.year5_v1_e_prelim}}</font></b></sup></td>
                          </tr><tr>                              
                                <td class="fixed"><font size="2">Remarks</font></td>  
                  <td class="fixed"><font size="2">{{row.year1_v1_source_prelim}}</font></td>
                  <td class="fixed"><font size="2">{{row.year2_v1_source_prelim}}</font></td>                                             
                  <td class="fixed"><font size="2">{{row.year3_v1_source_prelim}}</font></td>             
                  <td class="fixed"><font size="2">{{row.year4_v1_source_prelim}}</font></td>             
                  <td class="fixed"><font size="2">{{row.year5_v1_source_prelim}}</font></td>
                           </tr></tbody></table>
                           
                      <font size="3" color="#0A72F7" face="SnowCap BT"><b>Volume 3</b></font>
                           <table class= "table table-sm table-bordered table-striped fixed"> 
                           <col width="10%"><col width="15%"><col width="15%"><col width="15%"><col width="15%"><col width="15%">      
                            <tbody><tr>   
                                <td class="fixed"><font size="2">Data</font></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v3" placeholder="Enter new data here" ng-model= "row.year1_v3_value_prelim" onkeydown="return (event.keyCode!=188);" ng-change='commas_remove(row,1)'></font><span style="float: right;"><label><input type="checkbox" ng-model="row.year1_v3_e_prelim" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v3" placeholder="Enter new data here" ng-model= "row.year2_v3_value_prelim" onkeydown="return (event.keyCode!=188);" ng-change='commas_remove(row,2)'></font><span style="float: right;"><label><input type="checkbox" ng-model="row.year2_v3_e_prelim" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v3" placeholder="Enter new data here" ng-model= "row.year3_v3_value_prelim" onkeydown="return (event.keyCode!=188);" ng-change='commas_remove(row,3)'></font><span style="float: right;"><label><input type="checkbox" ng-model="row.year3_v3_e_prelim" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v3" placeholder="Enter new data here" ng-model= "row.year4_v3_value_prelim" onkeydown="return (event.keyCode!=188);" ng-change='commas_remove(row,4)'></font><span style="float: right;"><label><input type="checkbox" ng-model="row.year4_v3_e_prelim" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>
                  <td class="fixed"><font size="2"><input type="text_2" name="v3" placeholder="Enter new data here" ng-model= "row.year5_v3_value_prelim" onkeydown="return (event.keyCode!=188);" ng-change='commas_remove(row,5)'></font><span style="float: right;"><label><input type="checkbox" ng-model="row.year5_v3_e_prelim" ng-true-value="'e'" ng-false-value="''" ><b><font size="4" color="#0A72F7" face="SnowCap BT">e</font></b></label></span></td>
                           </tr><tr>
                                <td class="fixed"><font size="2">Remarks</font></td>                                
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" placeholder="New data require a remark" ng-model= "row.year1_v3_source_prelim"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" placeholder="New data require a remark" ng-model= "row.year2_v3_source_prelim"></textarea></font></td>                                          
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" placeholder="New data require a remark" ng-model= "row.year3_v3_source_prelim"></textarea></font></td>            
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" placeholder="New data require a remark" ng-model= "row.year4_v3_source_prelim"></textarea></font></td>           
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" placeholder="New data require a remark" ng-model= "row.year5_v3_source_prelim"></textarea></font></td> 
                           </tr></tbody></table>
  <hr>                                                  
<font size="3" color="#0A72F7" face="SnowCap BT"><b>3. Footnotes</b></font>&emsp;<font size = "1"><i>Do not include standard footnotes (i.e. "e","r", etc.)</i></font> 
                          <table class= "table table-sm table-striped table-bordered fixed"> 
                          <col width="20%"><col width="20%"><col width="20%"><col width="20%"><col width="20%">      
                            <tbody><thead align="center"><tr>                                                 
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-4}}</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-3}}</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-2}}</b></font></th>                                
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-1}}</b></font></th>
                                <th class="fixed"><font size="3" color="#0A72F7" face="SnowCap BT"><b>{{year-0}}</b></font></th>                                
                           </tr></thead><tr>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year1_v3_footnote_1"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year2_v3_footnote_1"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year3_v3_footnote_1"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year4_v3_footnote_1"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year5_v3_footnote_1"></textarea></font></td>                                
                             </tr><tr>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year1_v3_footnote_2"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year2_v3_footnote_2"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year3_v3_footnote_2"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year4_v3_footnote_2"></textarea></font></td>
                  <td class="fixed"><font size="2"><textarea name="v3" rows="1" ng-model= "row.year5_v3_footnote_2"></textarea></font></td>                                                                                 
                            </tr></tbody></table>
                            
                <div class="modal-footer">
                      <button id="submit" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="submit()" align="right">Update</button></div>
                       </div></div></div></div>
                    
                            

<!--STRUCTURE PROMPT -->
    <div class="modal fade" id="structureModal" tabindex="-1" role="dialog" aria-labelledby="structureModalLabel">
      <div class="modal-lg modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header"><font size="5"><b>Structure and Layout</b></font></div>
                <div class="modal-body ">
                
                             
                <font size="4" color="#0A72F7" face="SnowCap BT"><b>Header</b></font>
                <table class="table table-sm table table-striped fixed"><tbody><tr>
                <td colspan="2"><font size=2>Title:</font></td>  
                <td colspan="10"><font size=2><input type="text" ng-model= "table.title" width=100%;></font></td>
                <td colspan="2" align="right"><font size=2>Table #:</font></td>
                <td colspan="4"align="left"><font size=2><input type="text" ng-model= "table.num" list="number"></font></td></tr><tr>
                    <datalist id="number"><option value="1"><option value="2"><option value="3"><option value="4"><option value="5"><option value="6"><option value="7"><option value="8"><option value="9"><option value="10"></datalist>
                <td colspan="2"><font size=2>Measure</font></td>
                <td colspan="5"><font size=2><input type="text" ng-model= "table.measure"></font></td>
                <td colspan="3" align="right"><font size=2>Unit:</font></td> 
                <td colspan="4"><font size=2><input type="text" ng-model= "table.unit_prefix"  list="multiplier"></font></td>
                       <datalist id="multiplier"><option value="Thousand"><option value="Million"></datalist>
                <td colspan="4" align="left"><font size=2><input type="text" ng-model= "table.unit"  list="unit"></font></td></tr>
                       <datalist id="unit"><option value="metric tons"><option value="cubic meters"><option value="kilograms"><option value="42-gallon barrels"><option value="carats"></datalist>
                   </tbody></table>
                
                <font size="4" color="#0A72F7" face="SnowCap BT"><b>Footnotes</b></font>
                <table class="table table-sm table-striped fixed"><tbody><tr>
                <td colspan="2"><font size=2>Title</font></td>
                <td colspan="10"><font size=2><textarea name="v3" rows="2" placeholder="This is the footnote that shows up on the title." ng-model= "table.title_fn"></textarea></font></td></tr><tr>
                <td colspan="2"><font size=2>Header #1</font></td> 
                <td colspan="10"><font size=2><textarea name="v3" rows="2" placeholder="This is the first footnote that shows up on the header." ng-model= "table.stub_fn_1"></textarea></font></td></tr><tr>
                <td colspan="2"><font size=2>Header #2</font></td> 
                <td colspan="10"><font size=2><textarea name="v3" rows="2" placeholder="This is the second footnote that shows up on the header." ng-model= "table.stub_fn_2"></textarea></font></td></tr><tr>
                <td colspan="2"><font size=2>Source</font></td>
                <td colspan="10"><font size=2><textarea name="v3" rows="2" placeholder="This show sup on the bottom of the table and can be used to list sources." ng-model= "table_source"></textarea></font></td></tr></tbody></table> 
                
                                <td valign="left" colspan="4"><font size=2><span style="float: left;"><label><input type="checkbox" ng-model="showZeroes" ng-true-value=true ng-false-value=false ></label></span>&ensp;Zeroed Out</font></td>

                
                <div class="modal-footer">
                <p><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button id="submit" type="button" class="btn btn-primary" data-dismiss="modal" ng-click="submitStructureFinal()">Update</button>

           </div></div></div></div></div>


<!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE -->
<!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE --><!--MAIN INTERFACE -->

<!--TABLE HEADER-->

<div class="container-fluid">
   <div class="row no-gutters">
   
<div class="col-9  bd-content">
 <div class="row no-gutters">
<div class="col-1  bd-content"></div>
<div class="col-10  bd-content">

        <div class="page-header text-center"><br><br><br>
          <font size="3" id='num'>{{table|fnilter:'TABLE '+table.num}}</font>
          <br><font size="5" color="#0A72F7" face="SnowCap BT" id='title'>{{table|titlefilter}}</font><font color="#0A72F7" size=4><sup>&nbsp<span id='title_notes'>{{table|fnilter:(footnotes.includes(title_fn)?('[1, '+(footnotes.indexOf(title_fn) + 1))+']':'[1]')}}</span></sup></font>
          <br><font size="3" id='metadata'>{{table|fnilter:('('+table.unit_prefix)}}{{table|fnilter:(table.unit|comma:table.measure)}}{{table|fnilter:', gross weight unless otherwise specified)'}}</font>
        </div><br>
        <table class="table table-hover table-striped table-sm fixed" style="overflow-y: auto; height:400px;" id='data-table' ng-hide="loading">
                 <col width="30%"><col width="5%"><col width="8%"><col width="5%"><col width="8%"><col width="5%"><col width="8%"><col width="5%"><col width="8%"><col width="5%"><col width="8%"><col width="5%">

          <thead>

            <tr><font size=2>
              <th text-align=center>
                            Commodity <span style="font-weight:normal"><sup><font color="#0A72F7">{{footnotes.includes(stub_fn_1)?'['+(footnotes.indexOf(stub_fn_1) + 1)+']':''}}</font></sup></span>
              </th>
                            <th class></th>
                            <th  class="text-right">{{year-4}}</th>
                            <th></th>
                            <th class="text-right">{{year-3}}</th>
                            <th></th>
                            <th class="text-right">{{year-2}}</th>
                            <th></th>
                            <th class="text-right">{{year-1}}</th>
                            <th></th>
                            <th class="text-right">{{year-0}}</th>
                            <th></th>
                            </font></tr></thead>
                            
<!--BODY -->
<tbody>
<thead><tr><td colspan="12"><b>METALS</b></td></tr></thead>
            <tr ng-repeat="row in rows| filter: { industry: 'Metals'}" data-toggle="modal" data-target="#dataModal" ng-class="{'bg-danger':row.class}" ng-click = "openModalWith(row)" ng-hide="allZeroes(row)">
              <td class="fixed"><span style='color:red'>{{row.supress=="Yes"?"S ":''}}</span><font size=2>{{row|prodfilter:table}}</font><sup><font color="#0A72F7">{{row|row_fn:footnotes}}</font></sup> </td>
                            <td class='text-right'><font color="#C0C0C0" size=2>{{row|unitfilter}}</font></td>
                            
              <td class='text-right fixed' ng-class='{"table-danger":(row.year1_status==="MINERAL1"||row.year1_status==="MINERAL2"||row.year1_status==="GLOBAL1"||row.year1_status==="GLOBAL2"||row.year1_status==="SUPERVISOR")||((row.year1_v3_value_prelim===""&&row.year1_v3_source_prelim!=="")||(row.year1_v3_value_prelim!==""&&row.year1_v3_source_prelim==="")),"table-warning":!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""||row.confirm=="NO"||row.year1_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""))),"table-success":((row.year1_current_value==="")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim==="")))}'><font size=2>{{(row.year1|interlace:row.year1_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year1|interlace:row.year1_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year1_v3_footnote_1)?(footnotes.indexOf(row.year1_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year1_v3_footnote_2)?(footnotes.indexOf(row.year1_v3_footnote_2) + 1):''),estimated:(row.year1_v3_value_prelim?row.year1_v3_e_prelim:row.year1_current_e),revised:(row.year1===row.year1_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year2_status==="MINERAL1"||row.year2_status==="MINERAL2"||row.year2_status==="GLOBAL1"||row.year2_status==="GLOBAL2"||row.year2_status==="SUPERVISOR")||((row.year2_v3_value_prelim===""&&row.year2_v3_source_prelim!=="")||(row.year2_v3_value_prelim!==""&&row.year2_v3_source_prelim==="")),"table-warning":!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""||row.confirm=="NO"||row.year2_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""))),"table-success":((row.year2_current_value==="")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim==="")))}'><font size=2>{{(row.year2|interlace:row.year2_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year2|interlace:row.year2_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year2_v3_footnote_1)?(footnotes.indexOf(row.year2_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year2_v3_footnote_2)?(footnotes.indexOf(row.year2_v3_footnote_2) + 1):''),estimated:(row.year2_v3_value_prelim?row.year2_v3_e_prelim:row.year2_current_e),revised:(row.year2===row.year2_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year3_status==="MINERAL1"||row.year3_status==="MINERAL2"||row.year3_status==="GLOBAL1"||row.year3_status==="GLOBAL2"||row.year3_status==="SUPERVISOR")||((row.year3_v3_value_prelim===""&&row.year3_v3_source_prelim!=="")||(row.year3_v3_value_prelim!==""&&row.year3_v3_source_prelim==="")),"table-warning":!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""||row.confirm=="NO"||row.year3_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""))),"table-success":((row.year3_current_value==="")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim==="")))}'><font size=2>{{(row.year3|interlace:row.year3_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year3|interlace:row.year3_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year3_v3_footnote_1)?(footnotes.indexOf(row.year3_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year3_v3_footnote_2)?(footnotes.indexOf(row.year3_v3_footnote_2) + 1):''),estimated:(row.year3_v3_value_prelim?row.year3_v3_e_prelim:row.year3_current_e),revised:(row.year3===row.year3_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year4_status==="MINERAL1"||row.year4_status==="MINERAL2"||row.year4_status==="GLOBAL1"||row.year4_status==="GLOBAL2"||row.year4_status==="SUPERVISOR")||((row.year4_v3_value_prelim===""&&row.year4_v3_source_prelim!=="")||(row.year4_v3_value_prelim!==""&&row.year4_v3_source_prelim==="")),"table-warning":!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""||row.confirm=="NO"||row.year4_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""))),"table-success":((row.year4_current_value==="")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim==="")))}'><font size=2>{{(row.year4|interlace:row.year4_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year4|interlace:row.year4_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year4_v3_footnote_1)?(footnotes.indexOf(row.year4_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year4_v3_footnote_2)?(footnotes.indexOf(row.year4_v3_footnote_2) + 1):''),estimated:(row.year4_v3_value_prelim?row.year4_v3_e_prelim:row.year4_current_e),revised:(row.year4===row.year4_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year5_status==="MINERAL1"||row.year5_status==="MINERAL2"||row.year5_status==="GLOBAL1"||row.year5_status==="GLOBAL2"||row.year5_status==="SUPERVISOR")||((row.year5_v3_value_prelim===""&&row.year5_v3_source_prelim!=="")||(row.year5_v3_value_prelim!==""&&row.year5_v3_source_prelim==="")),"table-warning":!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""||row.confirm=="NO"||row.year5_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""))),"table-success":((row.year5_current_value==="")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim==="")))}'><font size=2>{{(row.year5|interlace:row.year5_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year5|interlace:row.year5_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year5_v3_footnote_1)?(footnotes.indexOf(row.year5_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year5_v3_footnote_2)?(footnotes.indexOf(row.year5_v3_footnote_2) + 1):''),estimated:(row.year5_v3_value_prelim?row.year5_v3_e_prelim:row.year5_current_e)} }}</sup></font></td>
</tr><thead><tr><td colspan="12"><b>INDUSTRIAL MINERALS</b></td></tr></thead>
                        <tr ng-repeat="row in rows| filter: { industry: 'Industrial Minerals'}" data-toggle="modal" data-target="#dataModal" ng-class="{'bg-danger':row.class}" ng-click = "openModalWith(row)" ng-hide="allZeroes(row)">
              <td class="fixed"><span style='color:red'>{{row.supress=="Yes"?"S ":''}}</span><font size=2>{{row|prodfilter:table}}</font><sup><font color="#0A72F7">{{row|row_fn:footnotes}}</font></sup> </td>
                            <td class='text-right'><font color="#C0C0C0" size=2>{{row|unitfilter}}</font></td>
                            
              <td class='text-right fixed' ng-class='{"table-danger":(row.year1_status==="MINERAL1"||row.year1_status==="MINERAL2"||row.year1_status==="GLOBAL1"||row.year1_status==="GLOBAL2"||row.year1_status==="SUPERVISOR")||((row.year1_v3_value_prelim===""&&row.year1_v3_source_prelim!=="")||(row.year1_v3_value_prelim!==""&&row.year1_v3_source_prelim==="")),"table-warning":!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""||row.confirm=="NO"||row.year1_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""))),"table-success":((row.year1_current_value==="")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim==="")))}'><font size=2>{{(row.year1|interlace:row.year1_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year1|interlace:row.year1_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year1_v3_footnote_1)?(footnotes.indexOf(row.year1_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year1_v3_footnote_2)?(footnotes.indexOf(row.year1_v3_footnote_2) + 1):''),estimated:(row.year1_v3_value_prelim?row.year1_v3_e_prelim:row.year1_current_e),revised:(row.year1===row.year1_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year2_status==="MINERAL1"||row.year2_status==="MINERAL2"||row.year2_status==="GLOBAL1"||row.year2_status==="GLOBAL2"||row.year2_status==="SUPERVISOR")||((row.year2_v3_value_prelim===""&&row.year2_v3_source_prelim!=="")||(row.year2_v3_value_prelim!==""&&row.year2_v3_source_prelim==="")),"table-warning":!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""||row.confirm=="NO"||row.year2_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""))),"table-success":((row.year2_current_value==="")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim==="")))}'><font size=2>{{(row.year2|interlace:row.year2_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year2|interlace:row.year2_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year2_v3_footnote_1)?(footnotes.indexOf(row.year2_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year2_v3_footnote_2)?(footnotes.indexOf(row.year2_v3_footnote_2) + 1):''),estimated:(row.year2_v3_value_prelim?row.year2_v3_e_prelim:row.year2_current_e),revised:(row.year2===row.year2_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year3_status==="MINERAL1"||row.year3_status==="MINERAL2"||row.year3_status==="GLOBAL1"||row.year3_status==="GLOBAL2"||row.year3_status==="SUPERVISOR")||((row.year3_v3_value_prelim===""&&row.year3_v3_source_prelim!=="")||(row.year3_v3_value_prelim!==""&&row.year3_v3_source_prelim==="")),"table-warning":!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""||row.confirm=="NO"||row.year3_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""))),"table-success":((row.year3_current_value==="")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim==="")))}'><font size=2>{{(row.year3|interlace:row.year3_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year3|interlace:row.year3_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year3_v3_footnote_1)?(footnotes.indexOf(row.year3_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year3_v3_footnote_2)?(footnotes.indexOf(row.year3_v3_footnote_2) + 1):''),estimated:(row.year3_v3_value_prelim?row.year3_v3_e_prelim:row.year3_current_e),revised:(row.year3===row.year3_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year4_status==="MINERAL1"||row.year4_status==="MINERAL2"||row.year4_status==="GLOBAL1"||row.year4_status==="GLOBAL2"||row.year4_status==="SUPERVISOR")||((row.year4_v3_value_prelim===""&&row.year4_v3_source_prelim!=="")||(row.year4_v3_value_prelim!==""&&row.year4_v3_source_prelim==="")),"table-warning":!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""||row.confirm=="NO"||row.year4_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""))),"table-success":((row.year4_current_value==="")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim==="")))}'><font size=2>{{(row.year4|interlace:row.year4_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year4|interlace:row.year4_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year4_v3_footnote_1)?(footnotes.indexOf(row.year4_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year4_v3_footnote_2)?(footnotes.indexOf(row.year4_v3_footnote_2) + 1):''),estimated:(row.year4_v3_value_prelim?row.year4_v3_e_prelim:row.year4_current_e),revised:(row.year4===row.year4_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year5_status==="MINERAL1"||row.year5_status==="MINERAL2"||row.year5_status==="GLOBAL1"||row.year5_status==="GLOBAL2"||row.year5_status==="SUPERVISOR")||((row.year5_v3_value_prelim===""&&row.year5_v3_source_prelim!=="")||(row.year5_v3_value_prelim!==""&&row.year5_v3_source_prelim==="")),"table-warning":!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""||row.confirm=="NO"||row.year5_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""))),"table-success":((row.year5_current_value==="")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim==="")))}'><font size=2>{{(row.year5|interlace:row.year5_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year5|interlace:row.year5_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year5_v3_footnote_1)?(footnotes.indexOf(row.year5_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year5_v3_footnote_2)?(footnotes.indexOf(row.year5_v3_footnote_2) + 1):''),estimated:(row.year5_v3_value_prelim?row.year5_v3_e_prelim:row.year5_current_e)} }}</sup></font></td>
</tr><thead><tr><td colspan="12"><b>MINERAL FUELS AND RELATED MATERIALS</b></td></tr></thead>
                        <tr ng-repeat="row in rows| filter: { industry: 'Mineral Fuels and Related Materials'}" data-toggle="modal" data-target="#dataModal" ng-class="{'bg-danger':row.class}" ng-click = "openModalWith(row)" ng-hide="allZeroes(row)">
              <td class="fixed"><span style='color:red'>{{row.supress=="Yes"?"S ":''}}</span><font size=2>{{row|prodfilter:table}}</font><sup><font color="#0A72F7">{{row|row_fn:footnotes}}</font></sup></td>
                            <td class='text-right'><font color="#C0C0C0" size=2>{{row|unitfilter}}</font></td>
                            <td class='text-right fixed' ng-class='{"table-danger":(row.year1_status==="MINERAL1"||row.year1_status==="MINERAL2"||row.year1_status==="GLOBAL1"||row.year1_status==="GLOBAL2"||row.year1_status==="SUPERVISOR")||((row.year1_v3_value_prelim===""&&row.year1_v3_source_prelim!=="")||(row.year1_v3_value_prelim!==""&&row.year1_v3_source_prelim==="")),"table-warning":!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""||row.confirm=="NO"||row.year1_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim===""))),"table-success":((row.year1_current_value==="")&&(!(isNaN(row.year1_v3_value_prelim)||row.year1_v3_value_prelim==="")))}'><font size=2>{{(row.year1|interlace:row.year1_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year1|interlace:row.year1_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year1_v3_footnote_1)?(footnotes.indexOf(row.year1_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year1_v3_footnote_2)?(footnotes.indexOf(row.year1_v3_footnote_2) + 1):''),estimated:(row.year1_v3_value_prelim?row.year1_v3_e_prelim:row.year1_current_e),revised:(row.year1===row.year1_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year2_status==="MINERAL1"||row.year2_status==="MINERAL2"||row.year2_status==="GLOBAL1"||row.year2_status==="GLOBAL2"||row.year2_status==="SUPERVISOR")||((row.year2_v3_value_prelim===""&&row.year2_v3_source_prelim!=="")||(row.year2_v3_value_prelim!==""&&row.year2_v3_source_prelim==="")),"table-warning":!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""||row.confirm=="NO"||row.year2_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim===""))),"table-success":((row.year2_current_value==="")&&(!(isNaN(row.year2_v3_value_prelim)||row.year2_v3_value_prelim==="")))}'><font size=2>{{(row.year2|interlace:row.year2_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year2|interlace:row.year2_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year2_v3_footnote_1)?(footnotes.indexOf(row.year2_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year2_v3_footnote_2)?(footnotes.indexOf(row.year2_v3_footnote_2) + 1):''),estimated:(row.year2_v3_value_prelim?row.year2_v3_e_prelim:row.year2_current_e),revised:(row.year2===row.year2_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year3_status==="MINERAL1"||row.year3_status==="MINERAL2"||row.year3_status==="GLOBAL1"||row.year3_status==="GLOBAL2"||row.year3_status==="SUPERVISOR")||((row.year3_v3_value_prelim===""&&row.year3_v3_source_prelim!=="")||(row.year3_v3_value_prelim!==""&&row.year3_v3_source_prelim==="")),"table-warning":!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""||row.confirm=="NO"||row.year3_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim===""))),"table-success":((row.year3_current_value==="")&&(!(isNaN(row.year3_v3_value_prelim)||row.year3_v3_value_prelim==="")))}'><font size=2>{{(row.year3|interlace:row.year3_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year3|interlace:row.year3_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year3_v3_footnote_1)?(footnotes.indexOf(row.year3_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year3_v3_footnote_2)?(footnotes.indexOf(row.year3_v3_footnote_2) + 1):''),estimated:(row.year3_v3_value_prelim?row.year3_v3_e_prelim:row.year3_current_e),revised:(row.year3===row.year3_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year4_status==="MINERAL1"||row.year4_status==="MINERAL2"||row.year4_status==="GLOBAL1"||row.year4_status==="GLOBAL2"||row.year4_status==="SUPERVISOR")||((row.year4_v3_value_prelim===""&&row.year4_v3_source_prelim!=="")||(row.year4_v3_value_prelim!==""&&row.year4_v3_source_prelim==="")),"table-warning":!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""||row.confirm=="NO"||row.year4_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim===""))),"table-success":((row.year4_current_value==="")&&(!(isNaN(row.year4_v3_value_prelim)||row.year4_v3_value_prelim==="")))}'><font size=2>{{(row.year4|interlace:row.year4_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year4|interlace:row.year4_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year4_v3_footnote_1)?(footnotes.indexOf(row.year4_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year4_v3_footnote_2)?(footnotes.indexOf(row.year4_v3_footnote_2) + 1):''),estimated:(row.year4_v3_value_prelim?row.year4_v3_e_prelim:row.year4_current_e),revised:(row.year4===row.year4_v3_prior_value?'':'r')} }}</sup></font></td>
              <td class='text-right fixed' ng-class='{"table-danger":(row.year5_status==="MINERAL1"||row.year5_status==="MINERAL2"||row.year5_status==="GLOBAL1"||row.year5_status==="GLOBAL2"||row.year15status==="SUPERVISOR")||((row.year5_v3_value_prelim===""&&row.year5_v3_source_prelim!=="")||(row.year5_v3_value_prelim!==""&&row.year5_v3_source_prelim==="")),"table-warning":!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""||row.confirm=="NO"||row.year5_current_value===""),"table-info":((row.confirm=="NO")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim===""))),"table-success":((row.year5_current_value==="")&&(!(isNaN(row.year5_v3_value_prelim)||row.year5_v3_value_prelim==="")))}'><font size=2>{{(row.year5|interlace:row.year5_v3_value_prelim) |table_unit:table.unit_prefix|kg_ton:{table:table,row:row}|number|number_num2:(row.year5|interlace:row.year5_v3_value_prelim)}} </font></td><td><font color="#0A72F7"><sup>{{footnotes.includes(row.year5_v3_footnote_1)?(footnotes.indexOf(row.year5_v3_footnote_1) + 1):''|footnoted:{row:row,number:(footnotes.includes(row.year5_v3_footnote_2)?(footnotes.indexOf(row.year5_v3_footnote_2) + 1):''),estimated:(row.year5_v3_value_prelim?row.year5_v3_e_prelim:row.year5_current_e)} }}</sup></font></td>

                        </tr></tbody></table>
                        <br>
<!--FOOTNOTES-->

        <p></p><p></p>
                <div class="col-12"><div class="row no-gutters">
                <div class="table-responsive-sm table-sm">

        <table class="table"  id="fn-table" style="overflow-y: auto"><font size=2>
          <thead><tr>
          <th><font size=2><sup>[e]</sup>Estimated.&nbsp;&nbsp;<sup>[r]</sup>Revised.&nbsp;&nbsp;do. Ditto.&nbsp;&nbsp;NA Not available.&nbsp;&nbsp;-- Zero.</font></th>
          </tr></thead>
          </font><tbody>
          <tr ng-repeat = "fn in footnotes track by $index">
                          <td><font size=2><sup>[{{$index +1}}]</sup>{{fn }}</font></td>
            </tr></tbody></table></div>
                        </div>  </div></div> </div>                     
                        <div class="col-1  bd-content"></div></div>

<!--SIDEBAR-->            
<div class="col-3  bd-sidebar">
<div class="row no-gutters">
<div class="col-12">
<img  class="img-responsive" src="https://i.lensdump.com/i/8MG7s9.png" align="right" height="100" width="500" alt="DA11k.jpg" border="0"></div>
<div class="row no-gutters">
<div class="col-2  bd-content"></div>
<div class="col-9  bd-content">  
<br><b>Year</b><br><select  ng-init="tmpYear = years[2]" ng-model="tmpYear" ng-options="x for x in years">
</select>
<br>
<br><b>Country</b><br><br><table class="table table-borderless table-sm fixed" style="overflow-y: auto;"><tbody><tr><td align="center">
<div class="input-group">
            <select id='filterOn' name=filterOn   ng-model="table_name" ng-init="table_name=countries[0]"ng-options="x for x in countries" 
                                          onkeydown = "if (event.keyCode == 13)
                                          
                        document.getElementById('initButton').click()"    ></select></div></td></tr></tbody></table>

<hr>                                                                          
<table class="table table-borderless table-sm fixed" style="overflow-y: auto;"><col width="50%"><col width="50%"><tbody>
    <tr><td><button id="initButton" type="button" class="btn btn-blue btn-block btn-sm" data-dismiss="modal" ng-click="init()">&emsp;Load&emsp;</button></td>
        <td><button id="xportxlsx"  type="button" class="btn btn-blue btn-block btn-sm xport" data-toggle="modal" ng-click="doit('xlsx',commodity);">&emsp;Export&emsp;</button></td></tr>
    <tr><td><button type="button" class="btn btn-orange btn-block btn-sm" data-toggle="modal" data-target = "#saveModal" ng-disabled="year<2017" title="{{year<2017? 'Disabled for this year':''}}" >&emsp;Save&emsp;</button></td>
        <td><button type="button" class="btn btn-orange btn-block btn-sm" data-toggle="modal" data-target = "#reconcileModal" ng-disabled="year!=2018"title="{{year!=2018? 'Disabled for this year':''}}">&ensp;Submit&ensp;</button></td></tr>
        </tbody></table>
<hr>
<div class="btn-group btn-block">

    <button id="btnGroupDrop1" type="button" class="btn  btn-green btn-block btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Reconcile</button>
    <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
      <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbxCOQnSJ4HYyhNEVUOGfT-HZRtV8G8OSsfywHR9hcu6yTo1aCC6/exec">Specialists</a>
      <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbwiG_23HBs55tNLIse2Az12td0dcNAcn24i-P6DNqLbuh_XcWHW/exec">Supervisors</a>
      <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbyVQBuJcJSd652_XUb7tF_WnR3RqKX_Y6fRySK1z4F_KtSjawj4/exec">Series Request Review</a> </div></div>

<div class="btn-group btn-block">

    <button id="btnGroupDrop2" type="button" class="btn  btn-red btn-block btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data</button>
    <div class="dropdown-menu" aria-labelledby="btnGroupDrop2">
      <a class="dropdown-item" href="https://drive.google.com/open?id=1hbPGUfLYIuol48TThKFaFZOD1XPhuuAs">OneWorld Library</a>
      <a class="dropdown-item" data-toggle="modal" data-target = #datarevisionModal>Series Request Form</a> </div></div>

<div class="btn-group btn-block">

    <button id="btnGroupDrop3" type="button" class="btn  btn-blue btn-block btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Managers</button>
    <div class="dropdown-menu" aria-labelledby="btnGroupDrop3">

            <a class="dropdown-item" data-toggle="modal" data-target = "#adminmModal" >Minerals Metrics</a>
            <a class="dropdown-item" data-toggle="modal" data-target = "#admingModal" >Global Metrics</a>
            <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbxaLbMEujebxErJKHg6fw2OWdLfaMs3wfcotD6hiEjD8cOlgfj5/exec" target="blank">Suppressions</a>
            <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycby9zP3q0UarSoPn-HNMvx0jSyOxpknXxVAUvGd15eGKkdjDOe8/exec" target="blank">Series Request Archive</a>
            <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycby9zP3q0UarSoPn-HNMvx0jSyOxpknXxVAUvGd15eGKkdjDOe8/exec" target="blank">Expirations</a>        
</div></div>
<table class="table table-borderless table-sm fixed" style="overflow-y: auto;"><tbody>
<div class="btn-group btn-block">

    <button id="btnGroupDrop4" type="button" class="btn  btn-gray btn-block btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Resources</button>
    <div class="dropdown-menu" aria-labelledby="btnGroupDrop4">
          <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbx2PS-M5pN_QBvgvhPdK0dm2JCgbYGoQS8zs0gGh_tmGA5vsSo/exec" target="blank"> Minerals Query</a> 
          <a class="dropdown-item" href="https://script.google.com/a/usgs.gov/macros/s/AKfycbxW2DnysrSnG6aPrDeGMBWyaalyedcI5oCS5bxeDWeniITNdII/exec" target="blank">Global Query</a> 
          <a class="dropdown-item" data-toggle="modal" data-target = "#structureModal" >Table Layout</a>
          <a class="dropdown-item" data-toggle="modal" data-target = "#troubleshootingModal">Help</a> 
          <a class="dropdown-item" ng-click="submitFinalizeIDA()">IDA</a> </div> </div></tbody></table>
<hr>

<p></p>Reconcile Legend<br>
<table class="table table-borderless table-sm fixed" style="overflow-y: auto;"><col width="20%"><col width="20%"><col width="20%"><col width="20%"><col width="20%"><tbody>
    <tr><td><button type="button" class="btn btn-glegend btn-block btn-sm"  data-toggle="tooltip" data-placement="bottom" data-html="true"  title="<b><u>No Reconcile Required</u></b><br>This data is either for a new year that has not been updated yet or  is new to the database."></button></td>
        <td><button type="button" class="btn btn-ylegend btn-block btn-sm"  data-toggle="tooltip" data-placement="bottom" data-html="true"  title="<b><u>Reconcile Required</u></b><br>This is a change to either the data, whether it is marked as estimated, or the source."></button></td>
        <td><button type="button" class="btn btn-rlegend btn-block btn-sm"  data-toggle="tooltip" data-placement="bottom" data-html="true"  title="<b><u>Missing Information</u></b><br>This data point is missing either the data or the source. Please click on a data point to determine what is missing."></button></td>
        <td><button type="button" class="btn btn-blegend btn-block btn-sm"  data-toggle="tooltip" data-placement="bottom" data-html="true"  title="<b><u>Volume Specific</u></b><br>This data only appears in one volume and does not require reconcile."></button></td>
        <td><button type="button" class="btn btn-ltgray btn-block btn-sm"   data-toggle="tooltip" data-placement="bottom" data-html="true"  title="<b><u>Reconcile In Progress</u></b><br>This data is already being reconciled. Please resolve this data point using the reconcile page first, then submit your table."></button></td></tr>
</tbody></table>

<div class="col-3 bd-content"></div></div>
              
</div></div></div></div>
  <script>
        $('#versionModal').modal()

    
    var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
        /* Toggle between adding and removing the "active" class,
        to highlight the button that controls the panel */
        this.classList.toggle("active");

        /* Toggle between hiding and showing the active panel */
        var panel = this.nextElementSibling;
        if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
    });
}

var link = document.getElementById('email121');
link.onclick = function() {
    this.href = "mailto:NMICSystems@usgs.gov?subject=OneWorld: Troubleshooting Report&body=";
    this.href += getBody();
};

function getBody() {
    return 'Please enter your issue here:';
}

 var commodities = [];
  var classificationModule = angular.module('mainapp',['ngSanitize', 'ngCsv']);
        
    var list = []
    var originalRows= []
        var scope;
        var admin;
    classificationModule.controller('firstcontroll',function($scope){
        
          google.script.run
          .withSuccessHandler(onSuccessSetup).withUserObject($scope)
          .getUsableCols();
            
         // $scope.text=list;
       
                      
            google.script.run
         .withSuccessHandler(onSuccessAdmin)
         .withUserObject($scope)
         .getAdmin();
                      $scope.today=new Date();

           $scope.rows=[];
          
         $scope.getArray ;
                   $scope.years = [2015,2016,2017,2018] ;
                   $scope.year = 2017 ;

    $scope.drr = {request:'', 
country:'', 
commodity:'', 
type:'', 
phase:'', 
measure:'', 
form:'', 
subform:'', 
unit:'', 
explanation:'', 
D_2011:'', 
E_2011:'', 
S_2011:'', 
D_2012:'', 
E_2012:'', 
S_2012:'', 
D_2013:'',  
E_2013:'', 
S_2013:'', 
D_2014:'', 
E_2014:'', 
S_2014:'', 
D_2015:'', 
E_2015:'', 
S_2015:'', 
D_2016:'', 
E_2016:'', 
S_2016:'', 
D_2017:'', 
E_2017:'', 
S_2017:'', 
D_2018:'', 
E_2018:'', 
S_2018:'' }
            $scope.totalY1 = function() {
 total=0;
  for (i=0;i<$scope.rows.length;i++){
    var val= parseInt($scope.rows[i].year1)
    console.log(val)
  if (Object.is(val,NaN)){    val=0;
    }
    total=total+ val
    }
    return total;
};
 $scope.totalY2 = function() {
  total=0;
  for (i=0;i<$scope.rows.length;i++){
    var val= parseInt($scope.rows[i].year2)
  if (Object.is(val,NaN)){    val=0;
    }
    total=total+ val
    }
    return total;
};
 $scope.totalY3 = function() {
total=0;
  for (i=0;i<$scope.rows.length;i++){
    var val= parseInt($scope.rows[i].year3)
  if (Object.is(val,NaN)){    val=0;
    }
    total=total+ val
    }
    return total;
};
 $scope.totalY4 = function() {
 total=0;
  for (i=0;i<$scope.rows.length;i++){
    var val= parseInt($scope.rows[i].year4)
  if (Object.is(val,NaN)){    val=0;
    }
    total=total+ val
    }
    return total;
};
 $scope.totalY5 = function() {
 total=0;
  for (i=0;i<$scope.rows.length;i++){
    var val= parseInt($scope.rows[i].year5)
  if (Object.is(val,NaN)){    val=0;
    }
    total=total+ val
    }
    return total;
};
$('#exampleModal').on('hidden.bs.modal', function () {
         Object.assign($scope.row,$scope.row_revert)
           $scope.$apply();


})
         $scope.submit = function() {
           //console.log("hope this is first")
                      $scope.row_revert=$scope.row;
                      $scope.footnotes= getFootnotes($scope.rows,$scope);
                        google.script.run
                        .withSuccessHandler(onSuccessRow)
                        .withUserObject($scope.row).saveRow($scope.table_name,$scope.row,'g')

         };

         $scope.init = function() {
           
                              $scope.rows=[]
           $scope.year=$scope.tmpYear;
            $('#loadModal').modal()
          google.script.run
          .withSuccessHandler(onSuccessData)
          .withUserObject($scope)
          .getData($scope.table_name,$scope.year,'g');
          google.script.run
          .withSuccessHandler(onSuccessMetadata)
          .withUserObject($scope)
          .getMetadata($scope.table_name,'g');

         };
             $scope.setup = function() {
           
          

         };
            $scope.restore = function() {
          google.script.run
          .withSuccessHandler(onSuccessData)
          .withUserObject($scope)
          .getDataRestore($scope.table_name);
          google.script.run
          .withSuccessHandler(onSuccessMetadata)
          .withUserObject($scope)
          .getMetadata($scope.table_name,'g');

         };
           
         $scope.openModalWith = function(row) {
            $scope.row=row;
         $scope.row_revert=Object.assign( {},row)
         };
              $scope.allZeroes = function(row) {   
              if($scope.showZeroes){return false;}
           if(row.year5_current_value==0&&row.year4_current_value==0&&row.year3_current_value==0&&row.year2_current_value==0&&row.year1_current_value==0&&row.year1_v1_value_prelim==0&&row.year2_v1_value_prelim==0&&row.year3_v1_value_prelim==0&&row.year4_v1_value_prelim==0&&row.year5_v1_value_prelim==0){
           return true;
           }else return false
         };
                       $scope.submit_drr = function(){

            google.script.run
            .withSuccessHandler(onSuccessDRR).sendDataDrr($scope.drr)
            
            
         };
           
         $scope.submitData = function(draft){
           console.log($scope.rows[0].year1_v1_value_prelim)
                      console.log($scope.rows[0].year1)

          google.script.run
            .withSuccessHandler(onSuccessDraftB).sendDataDraft($scope.table_name,$scope.rows,$scope.table,'g')
         };
            $scope.submitFinalizeIDA = function(){
           console.log('finalizing'+$scope.table_name);
              google.script.run.sendFinalize($scope.table_name,'g')
           };
           $scope.submitDataDraft = function(){{
           
           $scope.submitData(true)
           }
           };
           $scope.submitStructureFinal = function(){
if($scope.loaded_table){

 google.script.run.sendLayout($scope.loaded_table,$scope.table)
            
            }
           };
                   $scope.commas_remove = function(row,year){
                   if(year=1){
                              row.year1_v3_value_prelim=row.year1_v3_value_prelim.replace(/[^\dNAW]/g, '')

                   }
                   if(year=2){
                              row.year2_v3_value_prelim=row.year2_v3_value_prelim.replace(/[^\dNAW]/g, '')

                   }
                   if(year=3){
                              row.year3_v3_value_prelim=row.year3_v3_value_prelim.replace(/[^\dNAW]/g, '')

                   }
                   if(year=4){
                              row.year4_v3_value_prelim=row.year4_v3_value_prelim.replace(/[^\dNAW]/g, '')

                   }
                   if(year=5){
                              row.year5_v3_value_prelim=row.year5_v3_value_prelim.replace(/[^\dNAW]/g, '')

                   }
           
};
     $scope.badchar_remove_obj = function(o){
     o.str=o.str.replace(/[^\dNAW]/g, '')
     }
            $scope.submitDataFinal = function(){
           var result=$scope.verify()
                      if(result==0){

           
           google.script.run
            .withSuccessHandler(onSuccessDraft).withFailureHandler(onFailSubmit).sendDataReconcile($scope.table_name,$scope.rows,'g')
//           $scope.submitData(false)
         
           }
           else{
                     $scope.result=result
                  $('#validationModal').modal()}
                 
           
           };
                   $scope.doit=function (type,commodity,e, fn, dl) {
                   $('#exportModal').modal()
  var elt = document.getElementById('data-table');
    var fns = document.getElementById('fn-table')
    var wb = XLSX.utils.book_new();
    var ws1 = XLSX.utils.table_to_sheet(elt)
    var ws2 = XLSX.utils.table_to_sheet(fns)



var metadata = [  [  document.getElementById('num').innerHTML],[ document.getElementById('title').innerHTML+document.getElementById('title_notes').innerHTML ], [ document.getElementById('metadata').innerHTML]]
var ws3 = XLSX.utils.aoa_to_sheet(metadata);



    XLSX.utils.book_append_sheet(wb, ws1, "Data");

        XLSX.utils.book_append_sheet(wb, ws2, "Footnotes");
        XLSX.utils.book_append_sheet(wb, ws3, "Metadata");

    XLSX.writeFile(wb, fn || (commodity+'.'+ (type || 'xlsx')));
};
           $scope.verify = function(){
           var i;
           var issue_list = [];
           for (i=0;i<$scope.rows.length;i++){

           if( $scope.rows[i].year1_status==="MINERAL1"||$scope.rows[i].year1_status==="MINERAL2"||$scope.rows[i].year1_status==="GLOBAL1"||$scope.rows[i].year1_status==="GLOBAL2"||$scope.rows[i].year1_status==="SUPERVISOR"){
               issue_list.push("y1 in reconcile for "+$scope.rows[i].commodity)
           }
           if( $scope.rows[i].year2_status==="MINERAL1"||$scope.rows[i].year2_status==="MINERAL2"||$scope.rows[i].year2_status==="GLOBAL1"||$scope.rows[i].year2_status==="GLOBAL2"||$scope.rows[i].year2_status==="SUPERVISOR"){
               issue_list.push("y2 in reconcile for "+$scope.rows[i].commodity)
           }
           if( $scope.rows[i].year3_status==="MINERAL1"||$scope.rows[i].year3_status==="MINERAL2"||$scope.rows[i].year3_status==="GLOBAL1"||$scope.rows[i].year3_status==="GLOBAL2"||$scope.rows[i].year3_status==="SUPERVISOR"){
               issue_list.push("y3 in reconcile for "+$scope.rows[i].commodity)
           }
           if( $scope.rows[i].year4_status==="MINERAL1"||$scope.rows[i].year4_status==="MINERAL2"||$scope.rows[i].year4_status==="GLOBAL1"||$scope.rows[i].year4_status==="GLOBAL2"||$scope.rows[i].year4_status==="SUPERVISOR"){
               issue_list.push("y4 in reconcile for "+$scope.rows[i].commodity)
           }
           if( $scope.rows[i].year5_status==="MINERAL1"||$scope.rows[i].year5_status==="MINERAL2"||$scope.rows[i].year5_status==="GLOBAL1"||$scope.rows[i].year5_status==="GLOBAL2"||$scope.rows[i].year5_status==="SUPERVISOR"){
               issue_list.push("y5 in reconcile for "+$scope.rows[i].commodity)
           }
           }
                      for (i=0;i<$scope.rows.length;i++){

           if( !$scope.rows[i].year1_current_value && !$scope.rows[i].year1_v3_value_prelim){
               issue_list.push("no current or prelim val y1 for "+$scope.rows[i].commodity)
           }

           if( !$scope.rows[i].year2_current_value && !$scope.rows[i].year2_v3_value_prelim){
               issue_list.push("no current or prelim val y2 for "+$scope.rows[i].commodity)
           }
           if( !$scope.rows[i].year3_current_value && !$scope.rows[i].year3_v3_value_prelim){
               issue_list.push("no current or prelim val y3 for "+$scope.rows[i].commodity)
           }
           if( !$scope.rows[i].year4_current_value && !$scope.rows[i].year4_v3_value_prelim){
               issue_list.push("no current or prelim val y4 for "+$scope.rows[i].commodity)
           }
           if( !$scope.rows[i].year5_current_value && !$scope.rows[i].year5_v3_value_prelim){
               issue_list.push("no current or prelim val y5 for "+$scope.rows[i].commodity)
           }
           if($scope.rows[i].year1_v3_value_prelim!=''){
                if(!$scope.rows[i].year1_v3_source_prelim){ 
                       issue_list.push("missing src on y1 for "+$scope.rows[i].commodity)

                }
                if(!($scope.rows[i].year1_v3_value_prelim==="NA"||$scope.rows[i].year1_v3_value_prelim==="W"||parseInt($scope.rows[i].year1_v3_value_prelim)>=0)){
                                   issue_list.push("invalid prelim val on y1 for "+$scope.rows[i].commodity);
                }
            }else if($scope.rows[i].year1_v3_source_prelim){
                                   issue_list.push("missing val on y1 for "+$scope.rows[i].commodity)

            }
            
            
            if($scope.rows[i].year2_v3_value_prelim!=''){
                if(!$scope.rows[i].year2_v3_source_prelim){ 
                       issue_list.push("missing src on y2 for "+$scope.rows[i].commodity)

                }
                if(!($scope.rows[i].year2_v3_value_prelim==="NA"||$scope.rows[i].year2_v3_value_prelim==="W"||parseInt($scope.rows[i].year2_v3_value_prelim)>=0)){
                                   issue_list.push("invalid prelim val on y2 for "+$scope.rows[i].commodity);
                }
            }else if($scope.rows[i].year2_v3_source_prelim){
                                   issue_list.push("missing val on y2 for "+$scope.rows[i].commodity)

            }
            
            if($scope.rows[i].year3_v3_value_prelim!=''){
                if(!$scope.rows[i].year3_v3_source_prelim){ 
                       issue_list.push("missing src on y3 for "+$scope.rows[i].commodity)

                }
                if(!($scope.rows[i].year3_v3_value_prelim==="NA"||$scope.rows[i].year3_v3_value_prelim==="W"||parseInt($scope.rows[i].year3_v3_value_prelim)>=0)){
                                   issue_list.push("invalid prelim val on y3 for "+i);
                }
            }else if($scope.rows[i].year3_v3_source_prelim){
                                   issue_list.push("missing val on y3 for "+$scope.rows[i].commodity)

            }
            
            if($scope.rows[i].year4_v3_value_prelim!=''){
                if(!$scope.rows[i].year4_v3_source_prelim){ 
                       issue_list.push("missing src on y4 for "+$scope.rows[i].commodity)

                }
                if(!($scope.rows[i].year4_v3_value_prelim==="NA"||$scope.rows[i].year4_v3_value_prelim==="W"||parseInt($scope.rows[i].year4_v3_value_prelim)>=0)){
                                   issue_list.push("invalid prelim val on y4 for "+$scope.rows[i].commodity);
                }
            }else if($scope.rows[i].year4_v3_source_prelim){
                                   issue_list.push("missing val on y4 for "+$scope.rows[i].commodity)

            }
            
            if($scope.rows[i].year5_v3_value_prelim!=''){
                if(!$scope.rows[i].year5_v3_source_prelim){ 
                       issue_list.push("missing src on y5 for "+$scope.rows[i].commodity)

                }
                if(!($scope.rows[i].year5_v3_value_prelim==="NA"||$scope.rows[i].year5_v3_value_prelim==="W"||parseInt($scope.rows[i].year5_v3_value_prelim)>=0)){
                                   issue_list.push("invalid prelim val on y5 for "+$scope.rows[i].commodity);
                }
            }else if($scope.rows[i].year5_v3_source_prelim){
                                   issue_list.push("missing val on y5 for "+$scope.rows[i].commodity)

            }
          
           
          } 
           if(issue_list.length>0){
           console.log(issue_list);
return issue_list
}
return 0
           };
     });

          function onSuccessDRR($scope){ 
                   console.log("it worked???")
}
      
    function onSuccessSetup(value,$scope){
        
      $scope.commodities = value[0];
                  $scope.countries = value[1];
                  $scope.$apply();
}
function onSuccessRow(row){

}

//                    var list = document.getElementById('filterOn');
//while(list.firstChild){
//    list.removeChild(list.firstChild);
//}
//commodities.forEach(function(item){
//   var option = document.createElement('option');
//   var text = document.createTextNode(item);
//   option.appendChild(text);
//   list.appendChild(option);
//});
//    }

    function onSuccessHeaders(newlist,$scope){
      list=newlist;
      $scope.header = list;
      $scope.$apply();
    }
        function onSuccessAdmin(newadmin,$scope){
                         
             admin=newadmin       
      $scope.admin = admin;
      $scope.$apply();
    }
    function onSuccessData(newlist,$scope){


        $scope.loaded_table=$scope.table_name
      list=newlist;
      $scope.rows = list;
            console.log($scope.rows)
      $scope.originalRows = JSON.parse(JSON.stringify(list));
            

      $scope.footnotes = getFootnotes(list,$scope);
                        $scope.getArray=$scope.rows.concat( [$scope.footnotes])
           $scope.loading=false

      $scope.$apply();

    }
    function onSuccessMetadata(table,$scope){
      $scope.table = table;
      console.log($scope.table)
      $scope.$apply();
            
            $scope.stub_fn_1=table.stub_fn_1;
            $scope.stub_fn_2=table.stub_fn_2;
            $scope.title_fn=table.title_fn;
            $scope.total_fn=table.total_fn;


    }
        function onSuccessDraft($scope){



    }
         function onFailSubmit($scope){


     $('#reconcilefaillModal').modal()

    }
        
          function onSuccessDraftB($scope){
     $('#savefinalModal').modal()

//MODAL HERE
    }     
          classificationModule.filter('number_num', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input, num) {
      if(isNaN(num) || num < 1) {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return num;
        //  console.log(input)

    } else{
      return input
    }
  }
});

   classificationModule.filter('number_num2', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input, num) {
      if(isNaN(num)) {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return num;
        //  console.log(input)

    } else if(num==0){
      return '--'
      }else{
      return input
    }
  }
});
          classificationModule.filter('number_num2', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input, num) {
      if(isNaN(num)||num==='') {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return num;
        //  console.log(input)

    } else if(input==0){
      return '--'
      }else{
      return input
    }
  }
});
classificationModule.filter('kg_ton', function(){
return function(input,info) {

if(isNaN(input) || input < 1) {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return input;
}
else if(info.row.unit=='Kilograms' && info.table.unit=='Metric tons'){
return  Math.round(input*1.0/1000)

}
else if(info.table.unit=='Kilograms' && info.row.unit=='Metric tons'){
return input*1000

}
else return input
}
});
          // Setup the filter
          classificationModule.filter('table_unit', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,thousands) {
      if(isNaN(input) || input < 1 || thousands!=='Thousand') {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return input;
          console.log(input)

    } else {
      return Math.round(input*1.0/1000)
    }
  }
});
          classificationModule.filter('prod', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,thousands) {
      if(input=='Production') {

        return '';
      

    } else {
      return input
    }
  }
});

        classificationModule.filter('comma', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,next) {
      if(!input){
         input = ''
        }
        if(!next){
         next = ''
        }
          
            if (notWhiteSpace(input) && notWhiteSpace(next)){
        
        
        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return input+', '+next;
          }
          



     else {
      return input+next
    }
  }
});
        classificationModule.filter('startcomma', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,next) {
      if(!input){
         input = ''
        }
        if(!next){
         next = ''
        }
          
            if (notWhiteSpace(input) && notWhiteSpace(next)){
        
        
        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return ', '+next;
          }
          



     else {
      return next
    }
  }
});

classificationModule.filter('space', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input) {
      if(input) {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return input+' ';

    } else {
      return ''
    }
  }
});

classificationModule.filter('hide_if_same', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,table_unit) {
if(!input||!table_unit){
return input
}
      if(input.toUpperCase() === table_unit.toUpperCase() ) {
        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return '';

    } else {
      return input;
    }
  }
});
  // Setup the filter
          classificationModule.filter('interlace', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,draft) {
      if(draft==="") {

        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return input;

    } else {
      return draft
    }
  }
});
classificationModule.filter('footnoted', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,other_notes) {
      output='';
      if(input) {
        output+=input;
        
    }
      
      if(other_notes){
       if(other_notes.revised){
      if(output){
      output+=", "
      }
      output+="r"
      }
     if(other_notes.estimated && !(other_notes.row.year1_current_e && other_notes.row.year2_current_e && other_notes.row.year3_current_e && other_notes.row.year4_current_e && other_notes.row.year5_current_e)){
      if(output){
      output+=", "
      }
      output+="e"
      }
     
  }
    return output
    }
});

classificationModule.filter('hide_if_excluded', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,exclude) {

      if(!input) {
        // If the data is not a number or is less than one (thus not having a cardinal value) return it unmodified.
        return '';

    } else if (exclude){
      return '';
      }
      else return input;


}
});

   classificationModule.filter('stringToDate',function ($filter){
    return function (ele,dateFormat){
    if(ele){
        return $filter('date')(new Date(ele),dateFormat);
}
return ele
}
});

   classificationModule.filter('prodfilter', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,table) {
      var returnval=""

      if(!input) {
        return '';//fail case for if filer was used incorrectly

    } else{
      returnval=returnval+input.commodity
      if(input.type != "Production"){returnval=returnval+", "+input.type;}
      if(input.phase != ""){returnval=returnval+", "+input.phase;}
      if(input.form != ""){returnval=returnval+", "+input.form;}
      if(input.subform != ""){returnval=returnval+", "+input.subform;}
      if(input.measure_content != "gross weight"){returnval=returnval+", "+input.measure_content;}
      if(input.Country_Description != ""){returnval=returnval+", "+input.Country_Description;}
      if(table.country_group !== ""){returnval=input.country+", "+returnval;}



      return returnval;}}});     
      
        classificationModule.filter('unitfilter', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input) {
      var returnval=""

      if(!input) {
        return '';//fail case for if filer was used incorrectly

      } 
        else{
            if((input.unit_short == "t")&&(input.multiplier == "thousand")){returnval=returnval+"(Kt)";}
            if((input.unit_short == "t")&&(input.multiplier == "million")){returnval=returnval+"(Mt)";}
            if((input.unit_short == "m3")&&(input.multiplier != "thousand")&&(input.multiplier != "million")){returnval=returnval+"(mÂ³)";}
            if((input.unit_short == "m3")&&(input.multiplier == "thousand")){returnval=returnval+"(K-mÂ³)";}
            if((input.unit_short == "m3")&&(input.multiplier == "million")){returnval=returnval+"(M-mÂ³)";}
            if((input.unit_short == "ct")&&(input.multiplier != "thousand")&&(input.multiplier != "million")){returnval=returnval+"(ct)";}
            if((input.unit_short == "ct")&&(input.multiplier == "thousand")){returnval=returnval+"(K-ct)";}
            if((input.unit_short == "ct")&&(input.multiplier == "million")){returnval=returnval+"(M-ct)";}
            if((input.unit_short == "bbl")&&(input.multiplier == "thousand")){returnval=returnval+"(K-bbl)";}
            if((input.unit_short == "bbl")&&(input.multiplier == "million")){returnval=returnval+"(M-bbl)";}
            if((input.unit_short == "bbl")&&(input.multiplier != "thousand")&&(input.multiplier != "million")){returnval=returnval+"(bbl)";}
            if(input.unit_short == "kg"){returnval=returnval+"(kg)";}



            return returnval;
        }
        
        
        }});       
        
        classificationModule.filter('titlefilter', function() {

         // Create the return function and set the required parameter name to *input*
         return function(input) {
     var returnval=""

           if(!input) {
             return 'WELCOME TO ONEWORLD';//fail case for if filter was used incorrectly

           } 
       else{
           if(input.title == ""){returnval=returnval+"Welcome to OneWorld";}
           if(input.title != ""){returnval=input.title;}
           return returnval;
       }
       
       
       }});
               classificationModule.filter('fnilter', function() {

         // Create the return function and set the required parameter name to *input*
         return function(input,value) {
     var returnval=""

           if(!input) {
             return '';//fail case for if filter was used incorrectly

           } 
       else{
           if(input.title == ""){returnval=returnval;}
           if(input.title != ""){returnval=value}
           return returnval;
       }
       
       
       }});


$(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
  

      
        classificationModule.filter('cell_fn', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,footnotes) {
      var returnval=""

      if(!input) {
        return '';//fail case for if filer was used incorrectly

    } else{
      var fn_1 = (footnotes.indexOf(input.FOOTNOTE_VOLUME_3A)+1)+" "
      var fn_2 = footnotes.indexOf(input.FOOTNOTE_VOLUME_3B)+1

      if(fn_1>0){ returnval=returnval+fn_1}
      if(fn_2>0){ returnval=returnval+fn_2}


      return returnval;}}});
      
 classificationModule.filter('stub_fn', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,footnotes) {
      var returnval=""

      if(!input) {
        return '';//fail case for if filer was used incorrectly

    } else{
      var fn_1 = (footnotes.indexOf(input.FOOTNOTE_VOLUME_3A)+1)
      var fn_2 = footnotes.indexOf(input.FOOTNOTE_VOLUME_3B)+1

      if(fn_1>0){ returnval=returnval+fn_1}
      if(fn_2>0){ returnval=returnval+", "+fn_2}


       if(returnval!=''){
      
      return '['+returnval+']';
      }
      else return ''
      
      }}});


   classificationModule.filter('row_fn', function() {

    // Create the return function and set the required parameter name to **input**
    return function(input,footnotes) {
      var returnval=""

      if(!input) {
        return '';//fail case for if filer was used incorrectly

    } else{
      var fn_1 = (footnotes.indexOf(input.FOOTNOTE_VOLUME_3A)+1)
      var fn_2 = footnotes.indexOf(input.FOOTNOTE_VOLUME_3B)+1
      if(input.year1_current_e && input.year2_current_e && input.year3_current_e && input.year4_current_e && input.year5_current_e){returnval='e'}

      if(fn_1>0){ if(returnval){returnval=returnval+", "} returnval=returnval+fn_1}
      if(fn_2>0){ returnval=returnval+", "+fn_2}
      
      if(returnval!=''){
      
      return '['+returnval+']';
      }
      else return ''
      
      }}});     

          function getFootnotes(list,$scope){
            var i;
                var date = new Date();  
var options = { year: 'numeric', month: 'long', day: '2-digit' };
   dateStamp = date.toLocaleString('en-US', options)
            var footnotes = ['Table includes data available through '+dateStamp+'. All data are reported unless otherwise noted. Totals and estimated data are rounded to three significant digits; may not add to totals shown.'] ;
            
                     if($scope.stub_fn_1 && !footnotes.includes($scope.stub_fn_1)){
                footnotes.push($scope.stub_fn_1);
              }
                     if($scope.stub_fn_2 && !footnotes.includes($scope.stub_fn_2)){
                footnotes.push($scope.stub_fn_2);
              }
                     if($scope.title_fn && !footnotes.includes($scope.title_fn)){
                footnotes.push($scope.title_fn);
              }
                     
                for (i = 0; i<list.length;i++){
               
                  if(list[i].industry && list[i].industry.toUpperCase()==='Metals'.toUpperCase()){
              if( list[i].country_fn && !footnotes.includes(list[i].country_fn)){
                footnotes.push(list[i].country_fn);
              }
                         if( list[i].FOOTNOTE_VOLUME_3A && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3A)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3A);
              }
                    if( list[i].FOOTNOTE_VOLUME_3B && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3B)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3B);
                          }
              if(list[i].year1_v3_footnote_1 && !footnotes.includes(list[i].year1_v3_footnote_1)){
                footnotes.push(list[i].year1_v3_footnote_1);
              }
                    if(list[i].year1_v3_footnote_2 && !footnotes.includes(list[i].year1_v3_footnote_2)){
                footnotes.push(list[i].year1_v3_footnote_2);
              }
                    
                    if(list[i].year2_v3_footnote_1 && !footnotes.includes(list[i].year2_v3_footnote_1)){
                footnotes.push(list[i].year2_v3_footnote_1);
              }
                    if(list[i].year2_v3_footnote_2 && !footnotes.includes(list[i].year2_v3_footnote_2)){
                footnotes.push(list[i].year2_v3_footnote_2);
              }
                    
                    if(list[i].year3_v3_footnote_1 && !footnotes.includes(list[i].year3_v3_footnote_1)){
                footnotes.push(list[i].year3_v3_footnote_1);
              }
                    if(list[i].year3_v3_footnote_2 && !footnotes.includes(list[i].year3_v3_footnote_2)){
                footnotes.push(list[i].year3_v3_footnote_2);
              }
                    
                    if(list[i].year4_v3_footnote_1 && !footnotes.includes(list[i].year4_v3_footnote_1)){
                footnotes.push(list[i].year4_v3_footnote_1);
              }
                    if(list[i].year4_v3_footnote_2 && !footnotes.includes(list[i].year4_v3_footnote_2)){
                footnotes.push(list[i].year4_v3_footnote_2);
              }
                    
                    if(list[i].year5_v3_footnote_1 && !footnotes.includes(list[i].year5_v3_footnote_1)){
                footnotes.push(list[i].year5_v3_footnote_1);
              }
                    if(list[i].year5_v3_footnote_2 && !footnotes.includes(list[i].year5_v3_footnote_2)){
                footnotes.push(list[i].year5_v3_footnote_2);
              }

                    }
       
            }
                  for (i = 0; i<list.length;i++){
               
                  if(list[i].industry && list[i].industry.toUpperCase()==='Industrial Minerals'.toUpperCase()){
              if( list[i].country_fn && !footnotes.includes(list[i].country_fn)){
                footnotes.push(list[i].country_fn);
              }
                         if( list[i].FOOTNOTE_VOLUME_3A && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3A)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3A);
              }
                    if( list[i].FOOTNOTE_VOLUME_3B && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3B)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3B);
                          }
              if(list[i].year1_v3_footnote_1 && !footnotes.includes(list[i].year1_v3_footnote_1)){
                footnotes.push(list[i].year1_v3_footnote_1);
              }
                    if(list[i].year1_v3_footnote_2 && !footnotes.includes(list[i].year1_v3_footnote_2)){
                footnotes.push(list[i].year1_v3_footnote_2);
              }
                    
                    if(list[i].year2_v3_footnote_1 && !footnotes.includes(list[i].year2_v3_footnote_1)){
                footnotes.push(list[i].year2_v3_footnote_1);
              }
                    if(list[i].year2_v3_footnote_2 && !footnotes.includes(list[i].year2_v3_footnote_2)){
                footnotes.push(list[i].year2_v3_footnote_2);
              }
                    
                    if(list[i].year3_v3_footnote_1 && !footnotes.includes(list[i].year3_v3_footnote_1)){
                footnotes.push(list[i].year3_v3_footnote_1);
              }
                    if(list[i].year3_v3_footnote_2 && !footnotes.includes(list[i].year3_v3_footnote_2)){
                footnotes.push(list[i].year3_v3_footnote_2);
              }
                    
                    if(list[i].year4_v3_footnote_1 && !footnotes.includes(list[i].year4_v3_footnote_1)){
                footnotes.push(list[i].year4_v3_footnote_1);
              }
                    if(list[i].year4_v3_footnote_2 && !footnotes.includes(list[i].year4_v3_footnote_2)){
                footnotes.push(list[i].year4_v3_footnote_2);
              }
                    
                    if(list[i].year5_v3_footnote_1 && !footnotes.includes(list[i].year5_v3_footnote_1)){
                footnotes.push(list[i].year5_v3_footnote_1);
              }
                    if(list[i].year5_v3_footnote_2 && !footnotes.includes(list[i].year5_v3_footnote_2)){
                footnotes.push(list[i].year5_v3_footnote_2);
              }

                    }
       
            }
                  for (i = 0; i<list.length;i++){
               
                  if(list[i].industry &&  list[i].industry.toUpperCase()==='Mineral fuels and related materials'.toUpperCase()){
              if( list[i].country_fn && !footnotes.includes(list[i].country_fn)){
                footnotes.push(list[i].country_fn);
              }
                         if( list[i].FOOTNOTE_VOLUME_3A && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3A)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3A);
              }
                    if( list[i].FOOTNOTE_VOLUME_3B && !footnotes.includes(list[i].FOOTNOTE_VOLUME_3B)){
                footnotes.push(list[i].FOOTNOTE_VOLUME_3B);
                          }
              if(list[i].year1_v3_footnote_1 && !footnotes.includes(list[i].year1_v3_footnote_1)){
                footnotes.push(list[i].year1_v3_footnote_1);
              }
                    if(list[i].year1_v3_footnote_2 && !footnotes.includes(list[i].year1_v3_footnote_2)){
                footnotes.push(list[i].year1_v3_footnote_2);
              }
                    
                    if(list[i].year2_v3_footnote_1 && !footnotes.includes(list[i].year2_v3_footnote_1)){
                footnotes.push(list[i].year2_v3_footnote_1);
              }
                    if(list[i].year2_v3_footnote_2 && !footnotes.includes(list[i].year2_v3_footnote_2)){
                footnotes.push(list[i].year2_v3_footnote_2);
              }
                    
                    if(list[i].year3_v3_footnote_1 && !footnotes.includes(list[i].year3_v3_footnote_1)){
                footnotes.push(list[i].year3_v3_footnote_1);
              }
                    if(list[i].year3_v3_footnote_2 && !footnotes.includes(list[i].year3_v3_footnote_2)){
                footnotes.push(list[i].year3_v3_footnote_2);
              }
                    
                    if(list[i].year4_v3_footnote_1 && !footnotes.includes(list[i].year4_v3_footnote_1)){
                footnotes.push(list[i].year4_v3_footnote_1);
              }
                    if(list[i].year4_v3_footnote_2 && !footnotes.includes(list[i].year4_v3_footnote_2)){
                footnotes.push(list[i].year4_v3_footnote_2);
              }
                    
                    if(list[i].year5_v3_footnote_1 && !footnotes.includes(list[i].year5_v3_footnote_1)){
                footnotes.push(list[i].year5_v3_footnote_1);
              }
                    if(list[i].year5_v3_footnote_2 && !footnotes.includes(list[i].year5_v3_footnote_2)){
                footnotes.push(list[i].year5_v3_footnote_2);
              }

                    }
       
            }
                                    if($scope.total_fn && !footnotes.includes($scope.total_fn)){
                footnotes.push($scope.total_fn);
              }
            return footnotes;
          }
          function Row(country,country_fn,type,phase,measure_production,measure_content,form,unit,year1,year1_fn,year1_remarks,year1_e,year2,year2_fn,year2_remarks,year2_e,
             year3,year3_fn,year3_remarks,year3_e,year4,year4_fn,year4_remarks,year4_e,year5,year5_fn,year5_remarks,year5_e,id)

{
  this.country=country;
  this.country_fn=country_fn;
  this.type =type;
  this.phase=phase;
  this.measure_production=measure_production;
  this.measure_content=measure_content;
  this.form=form;
  this.unit=unit;
  this.year1=year1;
  this.year1_fn=year1_fn;
  this.year1_remarks=year1_remarks;
  this.year1_e=(year1_e?true:false);
  this.year2=year2;
  this.year2_fn=year2_fn;
  this.year2_remarks=year2_remarks;
  this.year2_e=(year2_e?true:false);

  this.year3=year3;
  this.year3_fn=year3_fn;
  this.year3_remarks=year3_remarks;
    this.year3_e=(year3_e?true:false);

  this.year4=year4;
  this.year4_fn=year4_fn;
  this.year4_remarks=year4_remarks;
    this.year4_e=(year4_e?true:false);

  this.year5=year5;
  this.year5_fn=year5_fn;
  this.year5_remarks=year5_remarks;
    this.year5_e=(year5_e?true:false);

  this.id=id;
  
}
function notWhiteSpace(str){
  return ! (!str || str.length === 0 || /^\s*$/.test(str))

}
          function rowEquals(row1,row2){
            if( row1.country===row2.country &&
              row1.country_fn===row2.country_fn &&

              row1.year1===row2.year1 &&
              row1.year1_fn===row2.year1_fn &&
              row1.year2===row2.year2 &&
              row1.year2_fn===row2.year2_fn &&
              row1.year3===row2.year3 &&
              row1.year3_fn===row2.year3_fn &&
              row1.year4===row2.year4 &&
              row1.year4_fn===row2.year4_fn &&
              row1.year5===row2.year5 &&
              row1.year5_fn===row2.year5_fn){
              return true;
          }
          else return false;
      }
      $(window).on('load',function(){
        $('#beginningModal').modal('show');
      });

  </script>
    </div>
</body>
</html>